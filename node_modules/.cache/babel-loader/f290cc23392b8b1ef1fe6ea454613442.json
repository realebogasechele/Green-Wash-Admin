{"ast":null,"code":"import _slicedToArray from\"/Users/onceknownriley/Dev/Ionic-React/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonAlert,IonButton,IonCol,IonContent,IonGrid,IonImg,IonInput,IonItem,IonLabel,IonLoading,IonPage,IonRow,IonTitle,IonToolbar}from\"@ionic/react\";import React,{useState}from\"react\";import{useHistory}from\"react-router\";import TGWLogo from\"../../components/TGWLogo.png\";import Connection from\"../../mixins/Connection\";import{validCellNum}from\"../../components/Regex/Regex\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var message='';var mapResponse=function mapResponse(response){};var SignIn=function SignIn(){var path=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showToast=_useState2[0],setShowToast=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showLoader=_useState4[0],setShowLoader=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showError=_useState6[0],setShowError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showSuccess=_useState8[0],setShowSuccess=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),successMessage=_useState10[0],setSuccessMessage=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),errorMessage=_useState12[0],setErrorMessage=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isFormValid=_useState14[0],setIsFormValid=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),cellNum=_useState16[0],setCellNum=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),password=_useState18[0],setPassword=_useState18[1];var updateCellNum=function updateCellNum(cellNum){setCellNum(cellNum);};var updatePassword=function updatePassword(password){setPassword(password);};var buttonHandler=function buttonHandler(){validateForm();if(isFormValid){var url=\"login\".concat(\"/\",cellNum,\"/\",password);Connection.processGetRequest({},url,function(response){console.log(\"made request\");mapResponse(response);});}};var validateForm=function validateForm(){if(cellNum===''&&password===''){setShowLoader(false);setIsFormValid(false);setErrorMessage(\"Fields cannot be empty.\");setShowError(true);}else{if(!validCellNum.test(cellNum)){setShowLoader(false);setIsFormValid(false);setErrorMessage(\"Invalid Cell Number.\");setShowError(true);}/*else if(!validPassword.test(password)){\n    setShowLoader(false);\n    setIsFormValid(false);\n    setErrorMessage(\"Password must be 8-16 characters long. Ensure it includes atleast 1 aphabet character and 1 digit.\");\n    setShowError(true);\n  }*/else{setIsFormValid(true);}}};var mapResponse=function mapResponse(response){console.log(\"mapping\");if(response.type===\"error\"){console.log(\"loader should be off!\");setShowLoader(false);setErrorMessage(response.data);setShowError(true);setCellNum('');setPassword('');}else{console.log(\"loader should be off!\");setShowLoader(false);setSuccessMessage('Successfully Sign In!');setShowSuccess(true);}};return/*#__PURE__*/_jsx(IonPage,{children:/*#__PURE__*/_jsxs(IonContent,{children:[/*#__PURE__*/_jsx(IonImg,{src:TGWLogo,alt:\"Logo.png\"}),/*#__PURE__*/_jsxs(IonToolbar,{children:[/*#__PURE__*/_jsx(IonLoading,{cssClass:\"my-custom-class\",showBackdrop:true,isOpen:showLoader,message:\"Please wait...\"}),/*#__PURE__*/_jsx(IonAlert,{isOpen:showError,onDidDismiss:function onDidDismiss(){return setShowError(false);},header:\"Error\",subHeader:\"Something went wrong.\",message:errorMessage,buttons:[\"OK\"]}),/*#__PURE__*/_jsx(IonAlert,{isOpen:showSuccess,onDidDismiss:function onDidDismiss(){return path.push(\"/dashboard\");},header:\"Success\",subHeader:successMessage,buttons:[\"OK\"]}),/*#__PURE__*/_jsxs(IonGrid,{children:[/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonTitle,{children:\"Sign In\"})})})}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"floating\",children:\"Cell Number\"}),/*#__PURE__*/_jsx(IonInput,{value:cellNum,onIonChange:function onIonChange(e){return updateCellNum(e.detail.value);}})]})})}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"floating\",children:\"Password\"}),/*#__PURE__*/_jsx(IonInput,{type:\"password\",value:password,onIonChange:function onIonChange(e){return updatePassword(e.detail.value);}})]})})}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsx(IonButton,{shape:\"round\",type:\"submit\",expand:\"block\",onClick:buttonHandler,children:\"SignIn\"})})}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account ? \",/*#__PURE__*/_jsx(\"a\",{href:\"/signUp\",children:\"Sign Up.\"})]})})})]})]})]})});};export default SignIn;","map":{"version":3,"sources":["/Users/onceknownriley/Dev/Ionic-React/admin/src/pages/SignIn/SignIn.tsx"],"names":["IonAlert","IonButton","IonCol","IonContent","IonGrid","IonImg","IonInput","IonItem","IonLabel","IonLoading","IonPage","IonRow","IonTitle","IonToolbar","React","useState","useHistory","TGWLogo","Connection","validCellNum","message","mapResponse","response","SignIn","path","showToast","setShowToast","showLoader","setShowLoader","showError","setShowError","showSuccess","setShowSuccess","successMessage","setSuccessMessage","errorMessage","setErrorMessage","isFormValid","setIsFormValid","cellNum","setCellNum","password","setPassword","updateCellNum","updatePassword","buttonHandler","validateForm","url","concat","processGetRequest","console","log","test","type","data","push","e","detail","value"],"mappings":"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","sourcesContent":["import {\n  IonAlert,\n  IonBackButton,\n  IonButton,\n  IonButtons,\n  IonCol,\n  IonContent,\n  IonFooter,\n  IonGrid,\n  IonHeader,\n  IonImg,\n  IonInput,\n  IonItem,\n  IonLabel,\n  IonLoading,\n  IonPage,\n  IonRow,\n  IonTitle,\n  IonToast,\n  IonToolbar,\n} from \"@ionic/react\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport TGWLogo from \"../../components/TGWLogo.png\";\nimport Connection from \"../../mixins/Connection\";\nimport { validCellNum, validPassword, validName } from \"../../components/Regex/Regex\";\n\n\nvar message = '';\n\n\nconst mapResponse = (response: any) => {\n\n};\n\n\nconst SignIn: React.FC = () => {\n  const path = useHistory();\n\n  const [showToast, setShowToast] = useState(false);\n  const [showLoader, setShowLoader] = useState(false);\n  const [showError, setShowError] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [isFormValid, setIsFormValid] = useState(false);\n\n  const [cellNum, setCellNum] = useState('');\n  const [password, setPassword] = useState('');\n\n  const updateCellNum = (cellNum: any) => {setCellNum(cellNum)};\n  const updatePassword = (password: any) => {setPassword(password)};\n\n  const buttonHandler = () => {\n    validateForm();\n    if(isFormValid){\n    let url = \"login\".concat(\"/\", cellNum, \"/\", password);\n    Connection.processGetRequest({}, url, (response: any) => {\n      console.log(\"made request\");\n      mapResponse(response);\n    })\n  }\n  };\n\n  const validateForm = () => {\n    if (cellNum === '' && password === ''){\n      setShowLoader(false);\n      setIsFormValid(false);\n      setErrorMessage(\"Fields cannot be empty.\");\n      setShowError(true);\n  }else {\n    if(!validCellNum.test(cellNum)){\n    setShowLoader(false);\n    setIsFormValid(false);\n    setErrorMessage(\"Invalid Cell Number.\");\n    setShowError(true);\n\n  }/*else if(!validPassword.test(password)){\n    setShowLoader(false);\n    setIsFormValid(false);\n    setErrorMessage(\"Password must be 8-16 characters long. Ensure it includes atleast 1 aphabet character and 1 digit.\");\n    setShowError(true);\n  }*/\n  else{\n    setIsFormValid(true);\n  }\n}\n}\n\n  const mapResponse = (response: any) => {\n    console.log(\"mapping\");\n    if (response.type === \"error\") {\n      console.log(\"loader should be off!\");\n      setShowLoader(false);\n      setErrorMessage(response.data);\n      setShowError(true);\n      setCellNum('');\n      setPassword('');\n    } else {\n      console.log(\"loader should be off!\");\n      setShowLoader(false);\n      setSuccessMessage('Successfully Sign In!');\n      setShowSuccess(true);\n    }\n  };\n  \n  return (\n    <IonPage>\n      <IonContent>\n          <IonImg src={TGWLogo} alt={\"Logo.png\"}/>\n        <IonToolbar>\n        <IonLoading\n        cssClass=\"my-custom-class\"\n        showBackdrop\n        isOpen={showLoader}\n        message={\"Please wait...\"}\n      />\n\n      <IonAlert\n        isOpen={showError}\n        onDidDismiss={() => setShowError(false)}\n        header={\"Error\"}\n        subHeader={\"Something went wrong.\"}\n        message={errorMessage}\n        buttons={[\"OK\"]}\n      />\n\n      <IonAlert\n        isOpen={showSuccess}\n        onDidDismiss={()=> path.push(\"/dashboard\")}\n        header={\"Success\"}\n        subHeader={successMessage}\n        buttons={[\"OK\"]}\n      />\n          <IonGrid>\n            <IonRow>\n              <IonCol>\n                <IonToolbar>\n                  <IonTitle>Sign In</IonTitle>\n                </IonToolbar>\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol>\n                <IonItem>\n                  <IonLabel position=\"floating\">Cell Number</IonLabel>\n                  <IonInput value={cellNum} onIonChange={e => updateCellNum(e.detail.value)}></IonInput>\n                </IonItem>\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol>\n                <IonItem>\n                  <IonLabel position=\"floating\">Password</IonLabel>\n                  <IonInput type=\"password\" value={password} onIonChange={e => updatePassword(e.detail.value)}></IonInput>\n                </IonItem>\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol>\n                <IonButton shape=\"round\" type=\"submit\" expand=\"block\" onClick={buttonHandler}>\n                  SignIn\n                </IonButton>\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol>\n                <p>\n                  Don't have an account ? <a href=\"/signUp\">Sign Up.</a>\n                </p>\n              </IonCol>\n            </IonRow>\n          </IonGrid>\n        </IonToolbar>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default SignIn;\n"]},"metadata":{},"sourceType":"module"}