{"ast":null,"code":"var _jsxFileName = \"/Users/onceknownriley/Documents/GreenWashProject/Admin/src/components/Forms/PackageForm.tsx\",\n    _s = $RefreshSig$();\n\nimport { IonAlert, IonButton, IonCol, IonGrid, IonInput, IonItem, IonLabel, IonLoading, IonRow, IonTextarea, IonToggle, useIonViewDidEnter } from \"@ionic/react\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport Connection from \"../../mixins/Connection\";\nimport { validName } from \"../Regex/Regex\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PackageForm = props => {\n  _s();\n\n  useIonViewDidEnter(() => {\n    if (props.name === 'Update') {\n      setShowLoader(true);\n      getPackage();\n    }\n  });\n  const path = useHistory();\n  let valid = false;\n  const [pack, setPack] = useState({\n    packageId: \"\",\n    promotionId: \"\",\n    packageName: \"\",\n    minutes: 0,\n    standardPrice: \"\",\n    suvPrice: \"\",\n    description: \"\",\n    onPromotion: true\n  });\n\n  const getPackage = () => {\n    var url = \"package/get/\".concat(props.id);\n    Connection.processGetRequest({}, url, response => {\n      mapPackage(response);\n    });\n  };\n\n  const mapPackage = response => {\n    if (response.type === \"error\") {\n      setShowLoader(false);\n      setErrorMessage(response.data);\n      setShowError(true);\n    } else {\n      setShowLoader(false);\n      setPack(response.data.data);\n    }\n  };\n\n  const [showLoader, setShowLoader] = useState(false);\n  const [showError, setShowError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const [showSuccess, setShowSuccess] = useState(false);\n\n  const updatePackageName = packageName => {\n    pack.packageName = packageName;\n  };\n\n  const updateMinutes = minutes => {\n    pack.minutes = minutes;\n  };\n\n  const updateStandardPrice = standardPrice => {\n    pack.standardPrice = standardPrice;\n  };\n\n  const updateSuvPrice = suvPrice => {\n    pack.suvPrice = suvPrice;\n  };\n\n  const updateDescription = description => {\n    pack.description = description;\n  };\n\n  const updateOnPromotion = onPromotion => {\n    pack.onPromotion = onPromotion;\n  };\n\n  function mapDeleteResponse(response) {\n    return console.log(\"deleted\");\n  }\n\n  const buttonHandler = () => {\n    validateForm();\n\n    if (valid === true) {\n      if (props.name === \"Update\") {\n        var url = \"package/update\";\n        var payload = {\n          packageId: pack.packageId,\n          promotionId: pack.promotionId,\n          packageName: pack.packageName,\n          minutes: pack.minutes,\n          standardPrice: pack.standardPrice,\n          description: pack.description,\n          suvPrice: pack.suvPrice,\n          onPromotion: pack.onPromotion\n        };\n        Connection.processPostRequest(payload, url, response => {\n          mapResponse(response);\n        });\n      } else if (props.name === \"Delete\") {\n        url = \"package/remove/\".concat(pack.packageId);\n        Connection.processDeleteRequest({}, url, response => {\n          mapDeleteResponse(response);\n        });\n      } else {\n        url = \"package/add\";\n        var payload = {\n          packageId: pack.packageId,\n          promotionId: pack.promotionId,\n          packageName: pack.packageName,\n          minutes: pack.minutes,\n          standardPrice: pack.standardPrice,\n          description: pack.description,\n          suvPrice: pack.suvPrice,\n          onPromotion: pack.onPromotion\n        };\n        Connection.processPostRequest(payload, url, response => {\n          mapResponse(response);\n        });\n      }\n    }\n  };\n\n  const mapResponse = response => {\n    if (response.data === 'error') {\n      setShowLoader(false);\n      setErrorMessage(response.data.data);\n      setShowError(true);\n    } else {\n      setShowLoader(false);\n\n      if (props.name === 'Update') {\n        setSuccessMessage('Successfully Updated!');\n        setShowSuccess(true);\n      } else {\n        setSuccessMessage('Successfully Added!');\n        setShowSuccess(true);\n      }\n    }\n  };\n\n  const validateForm = () => {\n    if (pack.packageName === '' || pack.standardPrice === '' || pack.suvPrice === '' || pack.description === '') {\n      setShowLoader(false);\n      setErrorMessage('Fields must not be empty.');\n      setShowError(true);\n    } else if (!validName.test(pack.packageName)) {\n      setShowLoader(false);\n      setErrorMessage('Invalid Package Name.');\n      setShowError(true);\n    } else if (pack.minutes <= 0) {\n      setShowLoader(false);\n      setErrorMessage('You cannot have 0 minutes.');\n      setShowError(true);\n    } else if (pack.standardPrice <= '0') {\n      setShowLoader(false);\n      setErrorMessage('You cannot have a free item');\n      setShowError(true);\n    } else {\n      valid = true;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(IonGrid, {\n    children: [/*#__PURE__*/_jsxDEV(IonLoading, {\n      cssClass: \"my-custom-class\",\n      showBackdrop: true,\n      isOpen: showLoader,\n      message: \"Please wait...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IonAlert, {\n      isOpen: showError,\n      onDidDismiss: () => setShowError(false),\n      header: \"Error\",\n      subHeader: \"Something went wrong.\",\n      message: errorMessage,\n      buttons: [\"OK\"]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IonAlert, {\n      isOpen: showSuccess,\n      onDidDismiss: () => path.push(\"/page/Package/package\"),\n      header: \"Success\",\n      subHeader: successMessage,\n      buttons: [\"OK\"]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IonRow, {\n      children: /*#__PURE__*/_jsxDEV(IonCol, {\n        children: /*#__PURE__*/_jsxDEV(IonItem, {\n          children: [/*#__PURE__*/_jsxDEV(IonLabel, {\n            position: \"floating\",\n            children: \"Package Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IonInput, {\n            disabled: props.isDisabled,\n            value: pack.packageName,\n            onIonChange: e => updatePackageName(e.detail.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IonRow, {\n      children: /*#__PURE__*/_jsxDEV(IonCol, {\n        children: /*#__PURE__*/_jsxDEV(IonItem, {\n          children: [/*#__PURE__*/_jsxDEV(IonLabel, {\n            position: \"floating\",\n            children: \"Minutes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IonInput, {\n            disabled: props.isDisabled,\n            value: pack.minutes,\n            onIonChange: e => updateMinutes(e.detail.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IonRow, {\n      children: /*#__PURE__*/_jsxDEV(IonCol, {\n        children: /*#__PURE__*/_jsxDEV(IonItem, {\n          children: [/*#__PURE__*/_jsxDEV(IonLabel, {\n            position: \"floating\",\n            children: \"Standard Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IonInput, {\n            disabled: props.isDisabled,\n            value: pack.standardPrice,\n            onIonChange: e => updateStandardPrice(e.detail.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IonRow, {\n      children: /*#__PURE__*/_jsxDEV(IonCol, {\n        children: /*#__PURE__*/_jsxDEV(IonItem, {\n          children: [/*#__PURE__*/_jsxDEV(IonLabel, {\n            position: \"floating\",\n            children: \"SUV Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IonInput, {\n            disabled: props.isDisabled,\n            value: pack.suvPrice,\n            onIonChange: e => updateSuvPrice(e.detail.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IonRow, {\n      children: /*#__PURE__*/_jsxDEV(IonCol, {\n        children: /*#__PURE__*/_jsxDEV(IonItem, {\n          children: [/*#__PURE__*/_jsxDEV(IonLabel, {\n            position: \"floating\",\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IonTextarea, {\n            disabled: props.isDisabled,\n            value: pack.description,\n            onIonChange: e => updateDescription(e.detail.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IonRow, {\n      children: /*#__PURE__*/_jsxDEV(IonCol, {\n        children: /*#__PURE__*/_jsxDEV(IonItem, {\n          children: [/*#__PURE__*/_jsxDEV(IonLabel, {\n            children: \"On Promotion\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IonToggle, {\n            color: \"primary\",\n            disabled: props.isDisabled,\n            checked: pack.onPromotion,\n            onIonChange: e => updateOnPromotion(e.detail.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IonRow, {\n      children: /*#__PURE__*/_jsxDEV(IonCol, {\n        children: /*#__PURE__*/_jsxDEV(IonButton, {\n          shape: \"round\",\n          type: \"submit\",\n          expand: \"block\",\n          onClick: buttonHandler,\n          children: props.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PackageForm, \"uQquZ5GeolO58bTjbhRdUaItauo=\", false, function () {\n  return [useIonViewDidEnter, useHistory];\n});\n\n_c = PackageForm;\nexport default PackageForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"PackageForm\");","map":{"version":3,"sources":["/Users/onceknownriley/Documents/GreenWashProject/Admin/src/components/Forms/PackageForm.tsx"],"names":["IonAlert","IonButton","IonCol","IonGrid","IonInput","IonItem","IonLabel","IonLoading","IonRow","IonTextarea","IonToggle","useIonViewDidEnter","React","useState","useHistory","Connection","validName","PackageForm","props","name","setShowLoader","getPackage","path","valid","pack","setPack","packageId","promotionId","packageName","minutes","standardPrice","suvPrice","description","onPromotion","url","concat","id","processGetRequest","response","mapPackage","type","setErrorMessage","data","setShowError","showLoader","showError","errorMessage","successMessage","setSuccessMessage","showSuccess","setShowSuccess","updatePackageName","updateMinutes","updateStandardPrice","updateSuvPrice","updateDescription","updateOnPromotion","mapDeleteResponse","console","log","buttonHandler","validateForm","payload","processPostRequest","mapResponse","processDeleteRequest","test","push","isDisabled","e","detail","value","checked"],"mappings":"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","sourcesContent":["import {\n  IonAlert,\n  IonButton,\n  IonCol,\n  IonGrid,\n  IonInput,\n  IonItem,\n  IonLabel,\n  IonLoading,\n  IonRow,\n  IonTextarea,\n  IonToggle,\n  useIonViewDidEnter,\n} from \"@ionic/react\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport Connection from \"../../mixins/Connection\";\nimport { validName } from \"../Regex/Regex\";\n\nconst PackageForm: React.FC<{\n  name: string;\n  isDisabled: boolean;\n  id: string;\n}> = (props) => {\n\n  useIonViewDidEnter(()=>{\n    if(props.name === 'Update'){\n      setShowLoader(true);\n      getPackage();\n    }\n  });\n\n  const path = useHistory();\n  let valid: boolean = false;\n\n  const [pack, setPack] = useState(\n    {\n      packageId: \"\",\n      promotionId: \"\",\n      packageName: \"\",\n      minutes: 0,\n      standardPrice: \"\",\n      suvPrice: \"\",\n      description: \"\",\n      onPromotion: true,\n    });\n\n    const getPackage = () => {\n      var url = \"package/get/\".concat(props.id);\n  \n      Connection.processGetRequest({}, url, (response: any) => {\n        mapPackage(response);\n      });\n    };\n\n    const mapPackage = (response: any) => {\n      if (response.type === \"error\") {\n        setShowLoader(false);\n        setErrorMessage(response.data);\n        setShowError(true);\n      } else {\n        setShowLoader(false);\n        setPack(response.data.data);\n      }\n    };\n\n    const [showLoader, setShowLoader] = useState(false);\n    const [showError, setShowError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState(\"\");\n    const [successMessage, setSuccessMessage] = useState(\"\");\n    const [showSuccess, setShowSuccess] = useState(false);\n\n  const updatePackageName = (packageName: any) => {\n    pack.packageName = packageName;\n  };\n  const updateMinutes = (minutes: any) => {\n    pack.minutes = minutes;\n  };\n  const updateStandardPrice = (standardPrice: any) => {\n    pack.standardPrice = standardPrice\n  };\n  const updateSuvPrice = (suvPrice: any) => {\n   pack.suvPrice = suvPrice;\n  };\n  const updateDescription = (description: any) => {\n    pack.description = description;\n  };\n  const updateOnPromotion = (onPromotion: any) => {\n    pack.onPromotion = onPromotion;\n  };\n\n  function mapDeleteResponse(response: any) {\n    return (console.log(\"deleted\"));\n  }\n\n  const buttonHandler = () => {\n    validateForm();\n    if(valid === true){\n    if (props.name === \"Update\") {\n      var url = \"package/update\";\n      var payload = {\n        packageId: pack.packageId,\n        promotionId: pack.promotionId,\n        packageName: pack.packageName,\n        minutes: pack.minutes,\n        standardPrice: pack.standardPrice,\n        description:pack.description,\n        suvPrice: pack.suvPrice,\n        onPromotion: pack.onPromotion,\n      };\n\n      Connection.processPostRequest(payload, url, (response: any) => {\n        mapResponse(response);\n      });\n    } else if (props.name === \"Delete\") {\n      url = \"package/remove/\".concat(pack.packageId);\n\n      Connection.processDeleteRequest({}, url,(response: any)=>{\n        mapDeleteResponse(response);\n      })\n\n    } else {\n      url = \"package/add\";\n      var payload = {\n        packageId: pack.packageId,\n        promotionId: pack.promotionId,\n        packageName: pack.packageName,\n        minutes: pack.minutes,\n        standardPrice: pack.standardPrice,\n        description:pack.description,\n        suvPrice: pack.suvPrice,\n        onPromotion: pack.onPromotion,\n      };\n      Connection.processPostRequest(payload, url, (response: any) => {\n        mapResponse(response);\n      });\n    }\n  }\n  };\n\n  const mapResponse = (response: any) => {\n    if(response.data === 'error'){\n      setShowLoader(false);\n      setErrorMessage(response.data.data);\n      setShowError(true);\n    }else{\n      setShowLoader(false);\n      if(props.name === 'Update'){\n        setSuccessMessage('Successfully Updated!');\n        setShowSuccess(true);\n      }else{\n        setSuccessMessage('Successfully Added!');\n        setShowSuccess(true);\n      }\n    }\n  };\n\n  const validateForm = () => {\n    if(pack.packageName === '' || pack.standardPrice === '' || pack.suvPrice === '' || pack.description === ''){\n      setShowLoader(false);\n      setErrorMessage('Fields must not be empty.')\n      setShowError(true);\n    }else if(!validName.test(pack.packageName)){\n      setShowLoader(false);\n      setErrorMessage('Invalid Package Name.')\n      setShowError(true);\n    }else if(pack.minutes <= 0){\n      setShowLoader(false);\n      setErrorMessage('You cannot have 0 minutes.')\n      setShowError(true);\n    }else if(pack.standardPrice <='0'){\n      setShowLoader(false);\n      setErrorMessage('You cannot have a free item')\n      setShowError(true);\n    }else{\n      valid = true;\n    }\n  }\n  return (\n    <IonGrid>\n      <IonLoading\n        cssClass=\"my-custom-class\"\n        showBackdrop\n        isOpen={showLoader}\n        message={\"Please wait...\"}\n      />\n\n      <IonAlert\n        isOpen={showError}\n        onDidDismiss={() => setShowError(false)}\n        header={\"Error\"}\n        subHeader={\"Something went wrong.\"}\n        message={errorMessage}\n        buttons={[\"OK\"]}\n      />\n\n      <IonAlert\n        isOpen={showSuccess}\n        onDidDismiss={() => path.push(\"/page/Package/package\")}\n        header={\"Success\"}\n        subHeader={successMessage}\n        buttons={[\"OK\"]}\n      />\n      <IonRow>\n        <IonCol>\n          <IonItem>\n            <IonLabel position=\"floating\">Package Name</IonLabel>\n            <IonInput\n              disabled={props.isDisabled}\n              value={pack.packageName}\n              onIonChange={(e) => updatePackageName(e.detail.value)}\n            ></IonInput>\n          </IonItem>\n        </IonCol>\n      </IonRow>\n      <IonRow>\n        <IonCol>\n          <IonItem>\n            <IonLabel position=\"floating\">Minutes</IonLabel>\n            <IonInput\n              disabled={props.isDisabled}\n              value={pack.minutes}\n              onIonChange={(e) => updateMinutes(e.detail.value)}\n            ></IonInput>\n          </IonItem>\n        </IonCol>\n      </IonRow>\n      <IonRow>\n        <IonCol>\n          <IonItem>\n            <IonLabel position=\"floating\">Standard Price</IonLabel>\n            <IonInput\n              disabled={props.isDisabled}\n              value={pack.standardPrice}\n              onIonChange={(e) => updateStandardPrice(e.detail.value)}\n            ></IonInput>\n          </IonItem>\n        </IonCol>\n      </IonRow>\n      <IonRow>\n        <IonCol>\n          <IonItem>\n            <IonLabel position=\"floating\">SUV Price</IonLabel>\n            <IonInput\n              disabled={props.isDisabled}\n              value={pack.suvPrice}\n              onIonChange={(e) => updateSuvPrice(e.detail.value)}\n            ></IonInput>\n          </IonItem>\n        </IonCol>\n      </IonRow>\n      <IonRow>\n        <IonCol>\n          <IonItem>\n            <IonLabel position=\"floating\">Description</IonLabel>\n            <IonTextarea\n              disabled={props.isDisabled}\n              value={pack.description}\n              onIonChange={(e) => updateDescription(e.detail.value)}\n            />\n          </IonItem>\n        </IonCol>\n      </IonRow>\n      <IonRow>\n        <IonCol>\n          <IonItem>\n            <IonLabel>On Promotion</IonLabel>\n            <IonToggle\n              color={\"primary\"}\n              disabled={props.isDisabled}\n              checked={pack.onPromotion}\n              onIonChange={(e) => updateOnPromotion(e.detail.checked)}\n            />\n          </IonItem>\n        </IonCol>\n      </IonRow>\n      <IonRow>\n        <IonCol>\n          <IonButton shape=\"round\" type=\"submit\" expand=\"block\" onClick={buttonHandler}>\n            {props.name}\n          </IonButton>\n        </IonCol>\n      </IonRow>\n    </IonGrid>\n  );\n};\n\nexport default PackageForm;"]},"metadata":{},"sourceType":"module"}