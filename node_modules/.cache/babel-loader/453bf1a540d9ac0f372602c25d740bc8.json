{"ast":null,"code":"var _jsxFileName = \"/Users/onceknownriley/Documents/GreenWashProject/Admin/src/pages/Management/Management.tsx\",\n    _s = $RefreshSig$();\n\n/** @jsxImportSource theme-ui */\nimport { IonAlert, IonButtons, IonContent, IonFab, IonFabButton, IonHeader, IonIcon, IonLoading, IonMenuButton, IonPage, IonTitle, IonToolbar, useIonViewWillEnter } from \"@ionic/react\";\nimport { add } from \"ionicons/icons\";\nimport { useState } from \"react\";\nimport { useParams } from \"react-router\";\nimport Card from \"../../components/Card/Card\";\nimport Connection from \"../../mixins/Connection\";\nimport \"./Page.css\";\nimport { jsxDEV as _jsxDEV } from \"theme-ui/jsx-dev-runtime\";\n\nconst Management = () => {\n  _s();\n\n  const addUrl = \"/add/\";\n  const {\n    name,\n    title\n  } = useParams();\n  const [showLoader, setShowLoader] = useState(true);\n  const [showError, setShowError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [agents, setAgents] = useState([{\n    agentId: \"\",\n    complexName: \"\",\n    contractId: \"\",\n    name: \"\",\n    surname: \"\",\n    id: \"\",\n    cellNum: \"\",\n    street1: \"\",\n    street2: \"\",\n    city: \"\",\n    province: \"\",\n    postalCode: \"\",\n    password: \"\"\n  }]);\n  const [complexes, setComplexes] = useState([{\n    complexId: \"\",\n    complexName: \"\",\n    street1: \"\",\n    street2: \"\",\n    city: \"\",\n    province: \"\",\n    postalCode: \"\",\n    telephoneNum: \"\",\n    startTime: \"\",\n    endTime: \"\",\n    cellNum: \"\",\n    units: [],\n    agents: []\n  }]);\n  const [packages, setPackages] = useState([{\n    packageId: \"\",\n    promotionId: \"\",\n    packageName: \"\",\n    minutes: 0,\n    standardPrice: \"\",\n    suvPrice: \"\",\n    description: \"\",\n    onPromotion: false\n  }]);\n  const [promotions, setPromotions] = useState([{\n    promotionId: \"\",\n    promotionName: \"\",\n    packageName: \"\",\n    standardPrice: \"\",\n    suvPrice: \"\",\n    isEnabled: false\n  }]);\n  useIonViewWillEnter(() => {\n    if (title === 'agent') {\n      getAgents();\n    } else if (title === 'complex') {\n      getComplexes();\n    } else if (title === 'package') {\n      getPackages();\n    } else {\n      getPromotions();\n    }\n  });\n\n  const getAgents = () => {\n    setShowLoader(true);\n    var url = \"agent/get/all\";\n    Connection.processGetRequest({}, url, response => {\n      mapAgents(response);\n    });\n  };\n\n  const getComplexes = () => {\n    setShowLoader(true);\n    var url = \"complex/get/all\";\n    Connection.processGetRequest({}, url, response => {\n      mapComplexes(response);\n    });\n  };\n\n  const getPackages = () => {\n    setShowLoader(true);\n    var url = \"package/get/all\";\n    Connection.processGetRequest({}, url, response => {\n      mapPackages(response);\n    });\n  };\n\n  const getPromotions = () => {\n    setShowLoader(true);\n    var url = \"promotion/get/all\";\n    Connection.processGetRequest({}, url, response => {\n      mapPromotions(response);\n    });\n  };\n\n  const mapPackages = response => {\n    if (response.type === \"error\") {\n      setShowLoader(false);\n      setErrorMessage(response.data);\n      setShowError(true);\n    } else {\n      setShowLoader(false);\n      setPackages(response.data.data);\n    }\n  };\n\n  const mapAgents = response => {\n    if (response.type === \"error\") {\n      setShowLoader(false);\n      setErrorMessage(response.data);\n      setShowError(true);\n    } else {\n      setShowLoader(false);\n      setAgents(response.data.data);\n    }\n  };\n\n  const mapComplexes = response => {\n    if (response.type === \"error\") {\n      setShowLoader(false);\n      setErrorMessage(response.data);\n      setShowError(true);\n    } else {\n      setShowLoader(false);\n      setComplexes(response.data.data);\n    }\n  };\n\n  const mapPromotions = response => {\n    if (response.type === \"error\") {\n      setShowLoader(false);\n      setErrorMessage(response.data);\n      setShowError(true);\n    } else {\n      setShowLoader(false);\n      setPromotions(response.data.data);\n    }\n  };\n\n  return _jsxDEV(IonPage, {\n    children: [_jsxDEV(IonHeader, {\n      children: [_jsxDEV(IonToolbar, {\n        color: \"primary\",\n        children: [_jsxDEV(IonButtons, {\n          slot: \"start\",\n          children: _jsxDEV(IonMenuButton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this), _jsxDEV(IonTitle, {\n          children: name.concat(\" Management\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this), _jsxDEV(IonAlert, {\n        isOpen: showError,\n        onDidDismiss: () => setShowError(false),\n        header: 'Error',\n        subHeader: 'Something went wrong.',\n        message: errorMessage,\n        buttons: ['OK']\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), _jsxDEV(IonContent, {\n      fullscreen: true,\n      children: [_jsxDEV(IonLoading, {\n        cssClass: \"my-custom-class\",\n        showBackdrop: true,\n        isOpen: showLoader,\n        message: 'Please wait...'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 7\n      }, this), title === \"agent\" && agents[0].agentId !== '' && agents.map(agent => _jsxDEV(Card, {\n        type: title,\n        id: agent.agentId,\n        title: agent.name.concat(\" \", agent.surname),\n        subtitle: agent.complexName,\n        reference: name\n      }, agent.agentId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this)), title === \"agent\" && agents[0].agentId === '' && _jsxDEV(\"h2\", {\n        sx: styles.heading,\n        children: \"No Agents\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), title === \"complex\" && complexes[0].complexId !== '' && complexes.map(complex => _jsxDEV(Card, {\n        type: title,\n        id: complex.complexId,\n        title: complex.complexName,\n        subtitle: complex.street2,\n        reference: name\n      }, complex.complexId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 11\n      }, this)), title === \"complex\" && complexes[0].complexId === '' && _jsxDEV(\"h2\", {\n        sx: styles.heading,\n        children: \"No Complexes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), title === \"package\" && packages[0].minutes !== 0 && packages.map(pack => _jsxDEV(Card, {\n        type: title,\n        id: pack.packageId,\n        title: pack.packageName,\n        subtitle: pack.description,\n        reference: name\n      }, pack.packageId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)), title === \"package\" && packages[0].minutes === 0 && _jsxDEV(\"h2\", {\n        sx: styles.heading,\n        children: \"No Packages\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), title === \"promotion\" && promotions[0].promotionId !== '' && promotions.map(promotion => _jsxDEV(Card, {\n        type: title,\n        id: promotion.promotionId,\n        title: promotion.promotionName,\n        subtitle: promotion.packageName,\n        reference: name\n      }, promotion.promotionId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this)), title === \"promotion\" && promotions[0].promotionId === '' && _jsxDEV(\"h2\", {\n        sx: styles.heading,\n        children: \"No Promotions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this), _jsxDEV(IonFab, {\n        vertical: \"bottom\",\n        horizontal: \"end\",\n        slot: \"fixed\",\n        children: _jsxDEV(IonFabButton, {\n          href: addUrl.concat(name, \"/\", title),\n          children: _jsxDEV(IonIcon, {\n            icon: add\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 177,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Management, \"pqf23BLCh7oALRwEkeD+uAvvf7E=\", false, function () {\n  return [useParams, useIonViewWillEnter];\n});\n\n_c = Management;\nexport default Management;\nconst styles = {\n  heading: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    color: \"grey\"\n  }\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Management\");","map":{"version":3,"sources":["/Users/onceknownriley/Documents/GreenWashProject/Admin/src/pages/Management/Management.tsx"],"names":["IonAlert","IonButtons","IonContent","IonFab","IonFabButton","IonHeader","IonIcon","IonLoading","IonMenuButton","IonPage","IonTitle","IonToolbar","useIonViewWillEnter","add","useState","useParams","Card","Connection","Management","addUrl","name","title","showLoader","setShowLoader","showError","setShowError","errorMessage","setErrorMessage","agents","setAgents","agentId","complexName","contractId","surname","id","cellNum","street1","street2","city","province","postalCode","password","complexes","setComplexes","complexId","telephoneNum","startTime","endTime","units","packages","setPackages","packageId","promotionId","packageName","minutes","standardPrice","suvPrice","description","onPromotion","promotions","setPromotions","promotionName","isEnabled","getAgents","getComplexes","getPackages","getPromotions","url","processGetRequest","response","mapAgents","mapComplexes","mapPackages","mapPromotions","type","data","concat","map","agent","styles","heading","complex","pack","promotion","display","justifyContent","color"],"mappings":"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","sourcesContent":["/** @jsxImportSource theme-ui */\nimport {\n  IonAlert,\n  IonButtons,\n  IonContent,\n  IonFab,\n  IonFabButton,\n  IonHeader,\n  IonIcon,\n  IonLoading,\n  IonMenuButton,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  useIonViewWillEnter,\n} from \"@ionic/react\";\nimport { add } from \"ionicons/icons\";\nimport { useState } from \"react\";\nimport { useParams } from \"react-router\";\nimport Card from \"../../components/Card/Card\";\nimport Connection from \"../../mixins/Connection\";\nimport \"./Page.css\";\n\nconst Management: React.FC = () => {\n  const addUrl = \"/add/\";\n  const { name, title } =\n    useParams<{\n      name: string;\n      title: \"agent\" | \"complex\" | \"package\" | \"promotion\";\n    }>();\n\n  const [showLoader, setShowLoader] = useState(true);\n  const [showError, setShowError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [agents, setAgents] = useState([\n    {\n      agentId: \"\",\n      complexName: \"\",\n      contractId: \"\",\n      name: \"\",\n      surname: \"\",\n      id: \"\",\n      cellNum: \"\",\n      street1: \"\",\n      street2: \"\",\n      city: \"\",\n      province: \"\",\n      postalCode: \"\",\n      password: \"\",\n    },\n  ]);\n  const [complexes, setComplexes] = useState([\n    {\n      complexId: \"\",\n      complexName: \"\",\n      street1: \"\",\n      street2: \"\",\n      city: \"\",\n      province: \"\",\n      postalCode: \"\",\n      telephoneNum: \"\",\n      startTime: \"\",\n      endTime: \"\",\n      cellNum: \"\",\n      units: [],\n      agents: [],\n    },\n  ]);\n  const [packages, setPackages] = useState([\n    {\n      packageId: \"\",\n      promotionId: \"\",\n      packageName: \"\",\n      minutes: 0,\n      standardPrice: \"\",\n      suvPrice: \"\",\n      description: \"\",\n      onPromotion: false,\n    },\n  ]);\n  const [promotions, setPromotions] = useState([\n    {\n      promotionId: \"\",\n      promotionName: \"\",\n      packageName: \"\",\n      standardPrice: \"\",\n      suvPrice: \"\",\n      isEnabled: false,\n    },\n  ]);\n\n  useIonViewWillEnter( () => {\n    if(title === 'agent'){\n      getAgents();\n    }else if(title === 'complex'){\n      getComplexes();\n    }else if(title === 'package'){\n      getPackages();\n    }else{\n      getPromotions();\n    }\n  });\n\n  const getAgents = () => {\n    setShowLoader(true);\n    var url = \"agent/get/all\";\n    Connection.processGetRequest({}, url, (response: any) => {\n      mapAgents(response);\n    });\n  };\n  const getComplexes = () => {\n    setShowLoader(true);\n    var url = \"complex/get/all\";\n    Connection.processGetRequest({}, url, (response: any) => {\n      mapComplexes(response);\n    });\n  };\n  const getPackages = () => {\n    setShowLoader(true);\n    var url = \"package/get/all\";\n\n    Connection.processGetRequest({}, url, (response: any) => {\n      mapPackages(response);\n    });\n  };\n  const getPromotions = () => {\n    setShowLoader(true);\n    var url = \"promotion/get/all\";\n    Connection.processGetRequest({}, url, (response: any) => {\n      mapPromotions(response);\n    });\n  };\n\n  const mapPackages = (response: any) => {\n    if (response.type === \"error\") {\n      setShowLoader(false);\n      setErrorMessage(response.data);\n      setShowError(true);\n    } else {\n      setShowLoader(false);\n      setPackages(response.data.data);\n    }\n  };\n  const mapAgents = (response: any) => {\n    if (response.type === \"error\") {\n      setShowLoader(false);\n      setErrorMessage(response.data);\n      setShowError(true);\n    } else {\n      setShowLoader(false);\n      setAgents(response.data.data);\n    }\n  };\n\n  const mapComplexes = (response: any) => {\n    if (response.type === \"error\") {\n      setShowLoader(false);\n      setErrorMessage(response.data);\n      setShowError(true);\n    } else {\n      setShowLoader(false);\n      setComplexes(response.data.data);\n    }\n  };\n  const mapPromotions = (response: any) => {\n    if (response.type === \"error\") {\n      setShowLoader(false);\n      setErrorMessage(response.data);\n      setShowError(true);\n    } else {\n      setShowLoader(false);\n      setPromotions(response.data.data);\n    }\n  };\n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar color=\"primary\">\n          <IonButtons slot=\"start\">\n            <IonMenuButton />\n          </IonButtons>\n          <IonTitle>{name.concat(\" Management\")}</IonTitle>\n        </IonToolbar>\n        <IonAlert\n          isOpen={showError}\n          onDidDismiss={() => setShowError(false)}\n          header={'Error'}\n          subHeader={'Something went wrong.'}\n          message={errorMessage}\n          buttons={['OK']}\n        />\n      </IonHeader>\n\n      <IonContent fullscreen>\n      <IonLoading\n            cssClass='my-custom-class'\n            showBackdrop\n            isOpen={showLoader}\n            message={'Please wait...'}\n          />\n        { title === \"agent\" && agents[0].agentId !== '' &&\n        agents.map((agent) => (\n          <Card\n            type={title}\n            id={agent.agentId}\n            key={agent.agentId}\n            title={agent.name.concat(\" \", agent.surname)}\n            subtitle={agent.complexName}\n            reference={name}\n          />\n        ))}\n      { title === \"agent\" && agents[0].agentId === '' && \n        <h2 sx={styles.heading}>No Agents</h2>\n      }\n      { title === \"complex\" && complexes[0].complexId !== '' &&\n        complexes.map((complex) => (\n          <Card\n            type={title}\n            id={complex.complexId}\n            key={complex.complexId}\n            title={complex.complexName}\n            subtitle={complex.street2}\n            reference={name}\n          />\n        ))}\n      { title === \"complex\" && complexes[0].complexId === '' &&\n        <h2 sx={styles.heading}>No Complexes</h2>\n      }\n      { title === \"package\" && packages[0].minutes !== 0 &&\n      packages.map((pack) => (\n        <Card\n          type={title}\n          id={pack.packageId}\n          key={pack.packageId}\n          title={pack.packageName}\n          subtitle={pack.description}\n          reference={name}\n        />\n      ))}\n      { title === \"package\" && packages[0].minutes === 0 &&\n        <h2 sx={styles.heading}>No Packages</h2>\n      }\n      { title === \"promotion\" && promotions[0].promotionId !== '' &&\n        promotions.map((promotion) => (\n          <Card\n            type={title}\n            id={promotion.promotionId}\n            key={promotion.promotionId}\n            title={promotion.promotionName}\n            subtitle={promotion.packageName}\n            reference={name}\n          />\n        ))}\n      { title === \"promotion\" && promotions[0].promotionId === '' &&\n        <h2 sx={styles.heading}>No Promotions</h2>\n      }\n        <IonFab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\n          <IonFabButton href={addUrl.concat(name, \"/\", title)}>\n            <IonIcon icon={add} />\n          </IonFabButton>\n        </IonFab>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Management;\n\nconst styles = {\n  heading: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    color: \"grey\",\n  }\n}"]},"metadata":{},"sourceType":"module"}