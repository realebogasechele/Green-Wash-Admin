{"ast":null,"code":"import _slicedToArray from\"/Users/onceknownriley/Documents/GreenWashProject/Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonAlert,IonCard,IonCardHeader,IonCardSubtitle,IonCardTitle,IonCol,IonLoading,IonRow}from\"@ionic/react\";import React,{useState}from\"react\";import{useHistory}from\"react-router\";import Connection from\"../../mixins/Connection\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ClientCard=function ClientCard(props){var path=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showOptions=_useState2[0],setShowOptions=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showConfirm=_useState4[0],setShowConfirm=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showLoader=_useState6[0],setShowLoader=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showSuccess=_useState8[0],setShowSuccess=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showError=_useState10[0],setShowError=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),message=_useState12[0],setMessage=_useState12[1];var handler=function handler(){setShowOptions(true);};var deleteClient=function deleteClient(id){setShowLoader(true);var url='client/remove/'.concat(id);Connection.processDeleteRequest({},url,function(response){return mapResponse(response);});};var mapResponse=function mapResponse(response){if(response.type==='error'){setShowLoader(false);setMessage(response.data);setShowError(true);}else{setShowLoader(false);setMessage(response.data);setShowSuccess(true);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IonLoading,{cssClass:\"my-custom-class\",showBackdrop:true,isOpen:showLoader,message:\"Please wait...\"}),/*#__PURE__*/_jsx(IonAlert,{isOpen:showError,onDidDismiss:function onDidDismiss(){return setShowError(false);},header:\"Error\",subHeader:\"Something went wrong.\",message:message,buttons:[\"OK\"]}),/*#__PURE__*/_jsx(IonAlert,{isOpen:showSuccess,onDidDismiss:function onDidDismiss(){return path.replace(\"/clients\");},header:\"Success\",subHeader:message,buttons:[\"OK\"]}),/*#__PURE__*/_jsx(IonAlert,{isOpen:showOptions,onDidDismiss:function onDidDismiss(){return setShowOptions(false);},header:'Warning',message:'By removing this client, you are revoking their access to this application and permanently removing them from your system ?',buttons:[{text:\"Cancel\",cssClass:\"secondary\"},{text:\"Continue\",handler:function handler(){setShowOptions(false);setShowConfirm(true);}}]}),/*#__PURE__*/_jsx(IonAlert,{isOpen:showConfirm,onDidDismiss:function onDidDismiss(){return setShowConfirm(false);},header:'Confirm',message:'Are you sure ?',buttons:[{text:\"No\",cssClass:\"secondary\"},{text:\"Yes\",handler:function handler(){setShowConfirm(false);deleteClient(props.id);}}]}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsx(IonCard,{color:\"secondary\",button:true,onClick:handler,children:/*#__PURE__*/_jsxs(IonCardHeader,{children:[/*#__PURE__*/_jsxs(IonCardTitle,{children:[props.name,\" \",props.surname]}),/*#__PURE__*/_jsx(IonCardSubtitle,{children:props.complexName})]})})})})]});};export default ClientCard;","map":{"version":3,"sources":["/Users/onceknownriley/Documents/GreenWashProject/Admin/src/components/Card/ClientCard.tsx"],"names":["IonAlert","IonCard","IonCardHeader","IonCardSubtitle","IonCardTitle","IonCol","IonLoading","IonRow","React","useState","useHistory","Connection","ClientCard","props","path","showOptions","setShowOptions","showConfirm","setShowConfirm","showLoader","setShowLoader","showSuccess","setShowSuccess","showError","setShowError","message","setMessage","handler","deleteClient","id","url","concat","processDeleteRequest","response","mapResponse","type","data","replace","text","cssClass","name","surname","complexName"],"mappings":"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","sourcesContent":["import {\n    IonAlert,\n  IonCard,\n  IonCardHeader,\n  IonCardSubtitle,\n  IonCardTitle,\n  IonCol,\n  IonLoading,\n  IonRow,\n} from \"@ionic/react\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport Connection from \"../../mixins/Connection\";\n\nconst ClientCard: React.FC<{\n  complexName: any;\n  name: any;\n  surname: any;\n  id: any;\n}> = (props) => {\n  const path = useHistory();\n    const [showOptions, setShowOptions] = useState(false);\n    const [showConfirm, setShowConfirm] = useState(false);\n    const [showLoader, setShowLoader] = useState(false);\n    const [showSuccess, setShowSuccess] = useState(false);\n    const [showError, setShowError] = useState(false);\n    const [message, setMessage] = useState(\"\");\n\n    const handler = () => {\n        setShowOptions(true);\n    };\n    const deleteClient = (id: any) => {\n      setShowLoader(true);\n      let url = 'client/remove/'.concat(id);\n      Connection.processDeleteRequest({}, url, (response: any) => mapResponse(response))\n    };\n\n    const mapResponse = (response: any) => {\n      if (response.type === 'error'){\n        setShowLoader(false);\n        setMessage(response.data);\n        setShowError(true);\n      }else{\n        setShowLoader(false);\n        setMessage(response.data);\n        setShowSuccess(true);\n      }\n    };\n  return (\n    <>\n    <IonLoading\n        cssClass=\"my-custom-class\"\n        showBackdrop\n        isOpen={showLoader}\n        message={\"Please wait...\"}\n      />\n\n      <IonAlert\n        isOpen={showError}\n        onDidDismiss={() => setShowError(false)}\n        header={\"Error\"}\n        subHeader={\"Something went wrong.\"}\n        message={message}\n        buttons={[\"OK\"]}\n      />\n\n      <IonAlert\n        isOpen={showSuccess}\n        onDidDismiss={() => path.replace(\"/clients\")}\n        header={\"Success\"}\n        subHeader={message}\n        buttons={[\"OK\"]}\n      />\n    <IonAlert\n          isOpen={showOptions}\n          onDidDismiss={() => setShowOptions(false)}\n          header={'Warning'}\n          message={'By removing this client, you are revoking their access to this application and permanently removing them from your system ?'}\n          buttons={[\n            {\n              text: \"Cancel\",\n              cssClass: \"secondary\",\n            },\n            {\n              text: \"Continue\",\n              handler: () => {\n                setShowOptions(false);\n                setShowConfirm(true);\n              },\n            },\n          ]}\n        />\n        <IonAlert\n          isOpen={showConfirm}\n          onDidDismiss={() => setShowConfirm(false)}\n          header={'Confirm'}\n          message={'Are you sure ?'}\n          buttons={[\n            {\n              text: \"No\",\n              cssClass: \"secondary\",\n            },\n            {\n              text: \"Yes\",\n              handler: () => {\n                setShowConfirm(false);\n                deleteClient(props.id);\n              },\n            },\n          ]}\n        />\n      <IonRow>\n        <IonCol>\n          <IonCard color=\"secondary\" button={true} onClick={handler}>\n            <IonCardHeader>\n              <IonCardTitle>\n                {props.name} {props.surname}\n              </IonCardTitle>\n              <IonCardSubtitle>{props.complexName}</IonCardSubtitle>\n            </IonCardHeader>\n          </IonCard>\n        </IonCol>\n      </IonRow>\n    </>\n  );\n};\n\nexport default ClientCard;\n"]},"metadata":{},"sourceType":"module"}