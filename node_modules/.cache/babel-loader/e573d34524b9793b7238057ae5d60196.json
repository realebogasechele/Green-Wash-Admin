{"ast":null,"code":"var _jsxFileName = \"/Users/onceknownriley/Dev/Ionic-React/admin/src/pages/Management/Management.tsx\",\n    _s = $RefreshSig$();\n\nimport { IonButtons, IonContent, IonFab, IonFabButton, IonHeader, IonIcon, IonMenuButton, IonPage, IonTitle, IonToolbar } from '@ionic/react';\nimport { add } from 'ionicons/icons';\nimport { useState } from 'react';\nimport { useParams } from 'react-router';\nimport Card from '../../components/Card/Card';\nimport Connection from '../../mixins/Connection';\nimport './Page.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Management = () => {\n  _s();\n\n  let cards;\n  const addUrl = \"/add/\";\n  const {\n    name,\n    title\n  } = useParams();\n  const [showLoader, setShowLoader] = useState(false);\n  const [showError, setShowError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [agents, setAgents] = useState([{\n    agentId: \"\",\n    complexName: \"\",\n    contractId: \"\",\n    name: \"\",\n    surname: \"\",\n    id: \"\",\n    cellNum: \"\",\n    street1: \"\",\n    street2: \"\",\n    city: \"\",\n    province: \"\",\n    postalCode: \"\",\n    password: \"\"\n  }]);\n  const [complexes, setComplexes] = useState([{\n    complexId: \"\",\n    name: \"\",\n    street1: \"\",\n    street2: \"\",\n    city: \"\",\n    province: \"\",\n    postalCode: \"\",\n    telephoneNum: \"\",\n    startTime: \"\",\n    endTime: \"\",\n    cellNum: \"\",\n    units: [],\n    agents: []\n  }]);\n  const [packages, setPackages] = useState([{\n    packageId: \"\",\n    promotionId: \"\",\n    packageName: \"\",\n    minutes: 0,\n    standardPrice: \"\",\n    suvPrice: \"\",\n    description: \"\",\n    onPromotion: false\n  }]);\n  const [promotions, setPromotions] = useState([{\n    promotionId: \"\",\n    promotionName: \"\",\n    packageName: \"\",\n    standardPrice: \"\",\n    suvPrice: \"\",\n    isEnabled: false\n  }]);\n\n  const getAgents = () => {\n    var url = 'agent/getAll';\n    Connection.processGetRequest({}, url, response => {\n      mapAgents(response);\n    });\n  };\n\n  const getComplexes = () => {\n    var url = 'complex/getAll';\n    Connection.processGetRequest({}, url, response => {\n      mapComplexes(response);\n    });\n  };\n\n  const getPackages = () => {\n    var url = 'package/getAll';\n    Connection.processGetRequest({}, url, response => {\n      mapPackages(response);\n    });\n  };\n\n  const getPromotions = () => {\n    var url = 'promotion/getAll';\n    Connection.processGetRequest({}, url, response => {\n      mapPromotions(response);\n    });\n  };\n\n  const mapPackages = response => {\n    if (response.type === 'error') {\n      setErrorMessage(response.data);\n      setShowError(true);\n    } else {\n      setPackages(response.data.data);\n    }\n  };\n\n  const mapAgents = response => {\n    if (response.type === 'error') {\n      setErrorMessage(response.data);\n      setShowError(true);\n    } else {\n      setAgents(response.data.data);\n    }\n  };\n\n  const mapComplexes = response => {\n    if (response.type === 'error') {\n      setErrorMessage(response.data);\n      setShowError(true);\n    } else {\n      setComplexes(response.data.data);\n    }\n  };\n\n  const mapPromotions = response => {\n    if (response.type === 'error') {\n      setErrorMessage(response.data);\n      setShowError(true);\n    } else {\n      setPromotions(response.data.data);\n    }\n  };\n\n  if (title === \"agent\") {\n    getAgents();\n\n    if (agents !== []) {\n      cards = agents.map(agent => /*#__PURE__*/_jsxDEV(Card, {\n        type: title,\n        id: agent.agentId,\n        title: agent.name.concat(\" \", agent.surname),\n        subtitle: agent.complexName,\n        reference: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 7\n      }, this));\n    } else {\n      cards = /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"No Agents\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 15\n      }, this);\n    }\n  } else if (title === \"complex\") {\n    getComplexes();\n\n    if (complexes !== []) {\n      cards = complexes.map(complex => /*#__PURE__*/_jsxDEV(Card, {\n        type: title,\n        id: complex.complexId,\n        title: complex.name,\n        subtitle: complex.street2,\n        reference: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 7\n      }, this));\n    } else {\n      cards = /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"No Complexes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }, this);\n    }\n  } else if (title === \"package\") {\n    getPackages();\n    cards = packages.map(pack => /*#__PURE__*/_jsxDEV(Card, {\n      type: title,\n      id: pack.packageId,\n      title: pack.packageName,\n      subtitle: pack.description,\n      reference: name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this));\n  } else {\n    getPromotions();\n\n    if (promotions !== []) {\n      cards = promotions.map(promotion => /*#__PURE__*/_jsxDEV(Card, {\n        type: title,\n        id: promotion.promotionId,\n        title: promotion.promotionName,\n        subtitle: promotion.packageName,\n        reference: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }, this));\n    } else {\n      cards = /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"No Promotions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 15\n      }, this);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(IonPage, {\n    children: [/*#__PURE__*/_jsxDEV(IonHeader, {\n      children: /*#__PURE__*/_jsxDEV(IonToolbar, {\n        children: [/*#__PURE__*/_jsxDEV(IonButtons, {\n          slot: \"start\",\n          children: /*#__PURE__*/_jsxDEV(IonMenuButton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IonTitle, {\n          children: name.concat(\" Management\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IonContent, {\n      fullscreen: true,\n      children: [cards, /*#__PURE__*/_jsxDEV(IonFab, {\n        vertical: \"bottom\",\n        horizontal: \"end\",\n        slot: \"fixed\",\n        children: /*#__PURE__*/_jsxDEV(IonFabButton, {\n          href: addUrl.concat(name, \"/\", title),\n          children: /*#__PURE__*/_jsxDEV(IonIcon, {\n            icon: add\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Management, \"/2i/zwoEOnS5N/IhKFNwlHdU+5c=\", false, function () {\n  return [useParams];\n});\n\n_c = Management;\nexport default Management;\n\nvar _c;\n\n$RefreshReg$(_c, \"Management\");","map":{"version":3,"sources":["/Users/onceknownriley/Dev/Ionic-React/admin/src/pages/Management/Management.tsx"],"names":["IonButtons","IonContent","IonFab","IonFabButton","IonHeader","IonIcon","IonMenuButton","IonPage","IonTitle","IonToolbar","add","useState","useParams","Card","Connection","Management","cards","addUrl","name","title","showLoader","setShowLoader","showError","setShowError","errorMessage","setErrorMessage","agents","setAgents","agentId","complexName","contractId","surname","id","cellNum","street1","street2","city","province","postalCode","password","complexes","setComplexes","complexId","telephoneNum","startTime","endTime","units","packages","setPackages","packageId","promotionId","packageName","minutes","standardPrice","suvPrice","description","onPromotion","promotions","setPromotions","promotionName","isEnabled","getAgents","url","processGetRequest","response","mapAgents","getComplexes","mapComplexes","getPackages","mapPackages","getPromotions","mapPromotions","type","data","map","agent","concat","complex","pack","promotion"],"mappings":"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","sourcesContent":["import { IonButtons, IonContent, IonFab, IonFabButton, IonHeader, IonIcon, IonMenuButton, IonPage, IonTitle, IonToolbar } from '@ionic/react';\nimport { add, card } from 'ionicons/icons';\nimport { useState } from 'react';\nimport { useParams } from 'react-router';\nimport Card from '../../components/Card/Card';\nimport Connection from '../../mixins/Connection';\nimport './Page.css';\n\nconst Management: React.FC = () => {\n  let cards;\n\n  const addUrl = \"/add/\";\n\n  \n\n  const { name, title} = useParams<{ name: string, title: \"agent\" | \"complex\" | \"package\" | \"promotion\"}>();\n  \n  const [ showLoader, setShowLoader ] = useState(false);\n  const [ showError, setShowError ] = useState(false);\n  const [ errorMessage, setErrorMessage ] = useState('');\n  const [agents, setAgents] = useState([{\n    agentId: \"\",\n    complexName: \"\",\n    contractId: \"\",\n    name: \"\",\n    surname: \"\",\n    id: \"\",\n    cellNum: \"\",\n    street1: \"\",\n    street2: \"\",\n    city: \"\",\n    province: \"\",\n    postalCode: \"\",\n    password: \"\",\n}]);\nconst [complexes, setComplexes] = useState([{\n  complexId: \"\",\n  name: \"\",\n  street1: \"\",\n  street2: \"\",\n  city: \"\",\n  province: \"\",\n  postalCode: \"\",\n  telephoneNum: \"\",\n  startTime: \"\",\n  endTime: \"\",\n  cellNum: \"\",\n  units: [],\n  agents: [],\n}]);\nconst [ packages, setPackages ] = useState([{\n    packageId: \"\",\n    promotionId: \"\",\n    packageName: \"\",\n    minutes: 0,\n    standardPrice: \"\",\n    suvPrice: \"\",\n    description: \"\",\n    onPromotion: false,\n}]);\nconst [ promotions, setPromotions ] = useState([{\n  promotionId: \"\",\n  promotionName: \"\",\n  packageName: \"\",\n  standardPrice: \"\",\n  suvPrice: \"\",\n  isEnabled: false\n}]);\n\nconst getAgents = () => {\n  var url = 'agent/getAll'\n  Connection.processGetRequest({},url, (response: any)=>{\n    mapAgents(response);\n  })\n};\nconst getComplexes = () => {\n  var url = 'complex/getAll'\n  Connection.processGetRequest({},url, (response: any)=>{\n    mapComplexes(response);\n  })\n};\nconst getPackages = () =>{\n  var url = 'package/getAll';\n\n  Connection.processGetRequest({}, url, (response: any) => {\n    mapPackages(response);\n  })\n}\nconst getPromotions = () => {\n  var url = 'promotion/getAll'\n  Connection.processGetRequest({},url, (response: any)=>{\n    mapPromotions(response);\n  })\n};\n\nconst mapPackages = (response: any) => {\n  if(response.type === 'error'){\n    setErrorMessage(response.data)\n    setShowError(true);\n  }\n  else{\n    setPackages(response.data.data);\n  }\n}\nconst mapAgents = (response: any) => {\n  if(response.type === 'error'){\n    setErrorMessage(response.data)\n    setShowError(true);\n  }\n  else{\n    setAgents(response.data.data);\n  }\n}\n\nconst mapComplexes = (response: any) => {\n  if(response.type === 'error'){\n    setErrorMessage(response.data)\n    setShowError(true);\n  }\n  else{\n    setComplexes(response.data.data);\n  }\n}\nconst mapPromotions = (response: any) => {\n  if(response.type === 'error'){\n    setErrorMessage(response.data)\n    setShowError(true);\n  }\n  else{\n    setPromotions(response.data.data);\n  }\n}\n\n  \n\n  if (title === \"agent\") {\n    getAgents();\n    if (agents !== []){\n    cards = agents.map(agent =>\n      <Card type={title} id={agent.agentId} title={agent.name.concat(\" \", agent.surname)} subtitle={agent.complexName} reference={name}/>)\n    }else{\n      cards = <h2>No Agents</h2>\n    }\n    \n  } else if (title === \"complex\") {\n    getComplexes();\n    if (complexes !== []){\n    cards = complexes.map(complex =>\n      <Card type={title} id={complex.complexId} title={complex.name} subtitle={complex.street2} reference={name}/>)\n    }else{\n      cards = <h2>No Complexes</h2>\n    }\n  } else if (title === \"package\") {\n    getPackages();\n    cards = packages.map(pack =>\n      <Card type={title} id={pack.packageId} title={pack.packageName} subtitle={pack.description} reference={name}/>)\n    \n  } else {\n    getPromotions();\n    if (promotions !== []){\n    cards = promotions.map(promotion =>\n      <Card type={title} id={promotion.promotionId} title={promotion.promotionName} subtitle={promotion.packageName} reference={name}/>)\n    }else{\n      cards = <h2>No Promotions</h2>;\n    }\n  }\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonMenuButton />\n          </IonButtons>\n          <IonTitle>{name.concat(\" Management\")}</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent fullscreen>\n        {cards}\n        <IonFab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\n          <IonFabButton href={addUrl.concat(name,\"/\",title)}>\n            <IonIcon icon={add} />\n          </IonFabButton>\n        </IonFab>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Management;\n"]},"metadata":{},"sourceType":"module"}