{"ast":null,"code":"var _jsxFileName = \"/Users/onceknownriley/Documents/GreenWashProject/Admin/src/pages/SignIn/SignIn.tsx\",\n    _s = $RefreshSig$();\n\n/** @jsxImportSource theme-ui */\nimport { IonAlert, IonButton, IonCard, IonCol, IonContent, IonGrid, IonImg, IonInput, IonItem, IonLabel, IonLoading, IonPage, IonRow, IonSelect, IonSelectOption, IonTitle, IonToolbar } from \"@ionic/react\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport TGWLogo from \"../../components/TGWLogo.png\";\nimport Connection from \"../../mixins/Connection\";\nimport { validCellNum, validPassword } from \"../../components/Regex/Regex\";\nimport { Storage } from \"@capacitor/storage\";\nimport { jsxDEV as _jsxDEV } from \"theme-ui/jsx-dev-runtime\";\n\nconst SignIn = () => {\n  _s();\n\n  const path = useHistory();\n  let valid = false;\n  let load = false;\n  const [showLoader, setShowLoader] = useState(false);\n  const [showError, setShowError] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [cellNum, setCellNum] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [selection, setSelection] = useState('cell');\n\n  const updateSelection = selection => {\n    setSelection(selection);\n  };\n\n  const updateCellNum = cellNum => {\n    setCellNum(cellNum);\n  };\n\n  const updateEmail = email => {\n    setEmail(email);\n  };\n\n  const updatePassword = password => {\n    setPassword(password);\n  };\n\n  const setAdminId = async data => {\n    await Storage.set({\n      key: 'adminId',\n      value: data\n    });\n  };\n\n  const buttonHandler = () => {\n    validateForm();\n\n    if (valid === true) {\n      load = true;\n      let url = \"login\".concat(\"/\", cellNum, \"/\", password);\n      Connection.processGetRequest({}, url, response => {\n        mapResponse(response);\n      });\n    }\n  };\n\n  const validateForm = () => {\n    if (cellNum === \"\" || password === \"\") {\n      setShowLoader(false);\n      valid = false;\n      setErrorMessage(\"Fields cannot be empty.\");\n      setShowError(true);\n    } else if (!validCellNum.test(cellNum)) {\n      setShowLoader(false);\n      valid = false;\n      setErrorMessage(\"Invalid Cell Number.\");\n      setShowError(true);\n    } else if (!validPassword.test(password)) {\n      setShowLoader(false);\n      valid = false;\n      setErrorMessage(\"Password must be 8-16 characters long. Ensure it includes atleast 1 aphabet character and 1 digit.\");\n      setShowError(true);\n    } else {\n      valid = true;\n    }\n  };\n\n  const mapResponse = response => {\n    setShowLoader(false);\n\n    if (response.type === \"error\") {\n      load = false;\n      setShowLoader(false);\n      setErrorMessage(response.data);\n      setShowError(true);\n      setCellNum(\"\");\n      setPassword(\"\");\n    } else {\n      load = false;\n      setAdminId(response.data.data);\n      setSuccessMessage(\"Successfully Sign In!\");\n      setShowSuccess(true);\n    }\n  };\n\n  return _jsxDEV(IonPage, {\n    children: _jsxDEV(IonContent, {\n      children: [_jsxDEV(IonImg, {\n        src: TGWLogo,\n        alt: \"Logo.png\",\n        sx: styles.img\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), _jsxDEV(IonToolbar, {\n        children: [_jsxDEV(IonLoading, {\n          cssClass: \"my-custom-class\",\n          showBackdrop: true,\n          isOpen: load,\n          message: \"Please wait...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), _jsxDEV(IonAlert, {\n          isOpen: showError,\n          onDidDismiss: () => setShowError(false),\n          header: \"Error\",\n          subHeader: \"Something went wrong.\",\n          message: errorMessage,\n          buttons: [\"OK\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), _jsxDEV(IonAlert, {\n          isOpen: showSuccess,\n          onDidDismiss: () => path.push(\"/dashboard\"),\n          header: \"Success\",\n          subHeader: successMessage,\n          buttons: [\"OK\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), _jsxDEV(IonCard, {\n          sx: {\n            mt: '8vh'\n          },\n          children: _jsxDEV(IonGrid, {\n            children: [_jsxDEV(IonRow, {\n              children: _jsxDEV(IonCol, {\n                offset: \"4\",\n                children: _jsxDEV(IonToolbar, {\n                  children: _jsxDEV(IonTitle, {\n                    size: \"large\",\n                    children: \"Sign In\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 158,\n                    columnNumber: 19\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 13\n            }, this), _jsxDEV(IonRow, {\n              children: [_jsxDEV(IonCol, {\n                size: \"8\",\n                children: selection === 'cell' ? _jsxDEV(IonItem, {\n                  children: [_jsxDEV(IonLabel, {\n                    position: \"floating\",\n                    children: \"Cell Number\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 19\n                  }, this), _jsxDEV(IonInput, {\n                    value: cellNum,\n                    onIonChange: e => updateCellNum(e.detail.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 17\n                }, this) : _jsxDEV(IonItem, {\n                  children: [_jsxDEV(IonLabel, {\n                    position: \"floating\",\n                    children: \"Email\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 173,\n                    columnNumber: 17\n                  }, this), _jsxDEV(IonInput, {\n                    value: email,\n                    onIonChange: e => updateEmail(e.detail.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 15\n              }, this), _jsxDEV(IonCol, {\n                children: _jsxDEV(IonSelect, {\n                  value: selection,\n                  onIonChange: e => updateSelection(e.detail.value),\n                  sx: styles.select,\n                  children: [_jsxDEV(IonSelectOption, {\n                    value: \"cell\",\n                    children: \"Cell Number\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 21\n                  }, this), _jsxDEV(IonSelectOption, {\n                    value: \"email\",\n                    children: \"Email\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 189,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 15\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 13\n            }, this), _jsxDEV(IonRow, {\n              children: _jsxDEV(IonCol, {\n                children: _jsxDEV(IonItem, {\n                  children: [_jsxDEV(IonLabel, {\n                    position: \"floating\",\n                    children: \"Password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 19\n                  }, this), _jsxDEV(IonInput, {\n                    type: \"password\",\n                    value: password,\n                    onIonChange: e => updatePassword(e.detail.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 13\n            }, this), _jsxDEV(IonRow, {\n              children: _jsxDEV(IonCol, {\n                children: _jsxDEV(IonButton, {\n                  shape: \"round\",\n                  type: \"submit\",\n                  expand: \"block\",\n                  onClick: () => buttonHandler(),\n                  children: \"SignIn\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 13\n            }, this), _jsxDEV(IonRow, {\n              children: _jsxDEV(IonCol, {\n                offset: \"4\",\n                children: _jsxDEV(\"p\", {\n                  children: _jsxDEV(\"a\", {\n                    href: \"/forgot\",\n                    children: \"Forgot password ?\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 19\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 13\n            }, this), _jsxDEV(IonRow, {\n              children: _jsxDEV(IonCol, {\n                offset: \"2.5\",\n                children: [\"Don't have an account ? \", _jsxDEV(\"a\", {\n                  href: \"/signUp\",\n                  children: \"Sign Up.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 43\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SignIn, \"v+4Oae1/bgvF68B50OcvIs6of4g=\", false, function () {\n  return [useHistory];\n});\n\n_c = SignIn;\nexport default SignIn;\nconst styles = {\n  img: {\n    pt: '6vh',\n    pl: '4vh',\n    pr: '4vh'\n  },\n  select: {\n    mt: '15px',\n    border: '1px solid grey'\n  }\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"sources":["/Users/onceknownriley/Documents/GreenWashProject/Admin/src/pages/SignIn/SignIn.tsx"],"names":["IonAlert","IonButton","IonCard","IonCol","IonContent","IonGrid","IonImg","IonInput","IonItem","IonLabel","IonLoading","IonPage","IonRow","IonSelect","IonSelectOption","IonTitle","IonToolbar","React","useState","useHistory","TGWLogo","Connection","validCellNum","validPassword","Storage","SignIn","path","valid","load","showLoader","setShowLoader","showError","setShowError","showSuccess","setShowSuccess","successMessage","setSuccessMessage","errorMessage","setErrorMessage","cellNum","setCellNum","email","setEmail","password","setPassword","selection","setSelection","updateSelection","updateCellNum","updateEmail","updatePassword","setAdminId","data","set","key","value","buttonHandler","validateForm","url","concat","processGetRequest","response","mapResponse","test","type","styles","img","push","mt","e","detail","select","pt","pl","pr","border"],"mappings":"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","sourcesContent":["/** @jsxImportSource theme-ui */\nimport {\n  IonAlert,\n  IonBackButton,\n  IonButton,\n  IonButtons,\n  IonCard,\n  IonCol,\n  IonContent,\n  IonFooter,\n  IonGrid,\n  IonHeader,\n  IonImg,\n  IonInput,\n  IonItem,\n  IonLabel,\n  IonLoading,\n  IonPage,\n  IonRow,\n  IonSelect,\n  IonSelectOption,\n  IonTitle,\n  IonToast,\n  IonToolbar,\n} from \"@ionic/react\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport TGWLogo from \"../../components/TGWLogo.png\";\nimport Connection from \"../../mixins/Connection\";\nimport {\n  validCellNum,\n  validPassword,\n} from \"../../components/Regex/Regex\";\nimport { Storage } from \"@capacitor/storage\";\n\nconst SignIn: React.FC = () => {\n  const path = useHistory();\n\n  let valid: boolean = false;\n  let load: boolean = false;\n\n  const [showLoader, setShowLoader] = useState(false);\n  const [showError, setShowError] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const [cellNum, setCellNum] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [selection, setSelection] = useState('cell');\n\n  const updateSelection = (selection: any) => {\n    setSelection(selection);\n  };\n\n  const updateCellNum = (cellNum: any) => {\n    setCellNum(cellNum);\n  };\n  const updateEmail = (email: any) => {\n    setEmail(email);\n  }\n  const updatePassword = (password: any) => {\n    setPassword(password);\n  };\n\n  const setAdminId = async (data: any) => {\n    await Storage.set({\n      key: 'adminId',\n      value: data,\n    });\n  };\n\n  const buttonHandler = () => {\n    validateForm();\n    if (valid === true) {\n      load = true;\n      let url = \"login\".concat(\"/\", cellNum, \"/\", password);\n      Connection.processGetRequest({}, url, (response: any) => {\n        mapResponse(response);\n      });\n    }\n  };\n\n  const validateForm = () => {\n    if (cellNum === \"\" || password === \"\") {\n      setShowLoader(false);\n      valid = false;\n      setErrorMessage(\"Fields cannot be empty.\");\n      setShowError(true);\n    } else if (!validCellNum.test(cellNum)) {\n        setShowLoader(false);\n        valid = false;\n        setErrorMessage(\"Invalid Cell Number.\");\n        setShowError(true);\n      } else if (!validPassword.test(password)) {\n        setShowLoader(false);\n        valid = false;\n        setErrorMessage(\n          \"Password must be 8-16 characters long. Ensure it includes atleast 1 aphabet character and 1 digit.\"\n        );\n        setShowError(true);\n      } else {\n        valid = true;\n      }\n  };\n\n  const mapResponse = (response: any) => {\n    setShowLoader(false);\n    if (response.type === \"error\") {\n      load = false;\n      setShowLoader(false);\n      setErrorMessage(response.data);\n      setShowError(true);\n      setCellNum(\"\");\n      setPassword(\"\");\n    } else {\n      load = false;\n      setAdminId(response.data.data);\n      setSuccessMessage(\"Successfully Sign In!\");\n      setShowSuccess(true);\n    }\n  };\n\n  return (\n    <IonPage>\n      <IonContent>\n        <IonImg src={TGWLogo} alt={\"Logo.png\"} sx={styles.img}/>\n        <IonToolbar>\n          <IonLoading\n            cssClass=\"my-custom-class\"\n            showBackdrop\n            isOpen={load}\n            message={\"Please wait...\"}\n          />\n\n          <IonAlert\n            isOpen={showError}\n            onDidDismiss={() => setShowError(false)}\n            header={\"Error\"}\n            subHeader={\"Something went wrong.\"}\n            message={errorMessage}\n            buttons={[\"OK\"]}\n          />\n\n          <IonAlert\n            isOpen={showSuccess}\n            onDidDismiss={() => path.push(\"/dashboard\")}\n            header={\"Success\"}\n            subHeader={successMessage}\n            buttons={[\"OK\"]}\n          />\n          <IonCard sx={{mt: '8vh'}}>\n          <IonGrid>\n            <IonRow>\n              <IonCol offset=\"4\">\n                <IonToolbar>\n                  <IonTitle size=\"large\">Sign In</IonTitle>\n                </IonToolbar>\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol size=\"8\">\n                {selection === 'cell' ?\n                <IonItem>\n                  <IonLabel position=\"floating\">Cell Number</IonLabel>\n                  <IonInput\n                    value={cellNum}\n                    onIonChange={(e) => updateCellNum(e.detail.value)}\n                  ></IonInput>\n                </IonItem> :\n                <IonItem>\n                <IonLabel position=\"floating\">Email</IonLabel>\n                <IonInput\n                  value={email}\n                  onIonChange={(e) => updateEmail(e.detail.value)}\n                ></IonInput>\n              </IonItem>}\n              </IonCol>\n              <IonCol>\n              <IonSelect\n                    value={selection}\n                    onIonChange={(e) => updateSelection(e.detail.value)}\n                    sx={styles.select}\n                  >\n                    <IonSelectOption value=\"cell\">\n                      Cell Number\n                    </IonSelectOption>\n                    <IonSelectOption value=\"email\">Email</IonSelectOption>\n                  </IonSelect>\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol>\n                <IonItem>\n                  <IonLabel position=\"floating\">Password</IonLabel>\n                  <IonInput\n                    type=\"password\"\n                    value={password}\n                    onIonChange={(e) => updatePassword(e.detail.value)}\n                  ></IonInput>\n                </IonItem>\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol>\n                <IonButton\n                  shape=\"round\"\n                  type=\"submit\"\n                  expand=\"block\"\n                  onClick={()=>buttonHandler()}\n                >\n                  SignIn\n                </IonButton>\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol offset = '4'>\n                <p>\n                  <a href=\"/forgot\">Forgot password ?</a>\n                </p>\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol offset='2.5'>\n                  Don't have an account ? <a href=\"/signUp\">Sign Up.</a>\n              </IonCol>\n            </IonRow>\n          </IonGrid>\n          </IonCard>\n        </IonToolbar>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default SignIn;\n\nconst styles = {\n  img:{\n    pt: '6vh',\n    pl:'4vh',\n    pr:'4vh'\n  },\n  select:{\n    mt: '15px',\n    border: '1px solid grey',\n  },\n}"]},"metadata":{},"sourceType":"module"}