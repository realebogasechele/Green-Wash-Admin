{"ast":null,"code":"import _slicedToArray from\"/Users/onceknownriley/Dev/Ionic-React/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonAlert,IonButton,IonCol,IonContent,IonGrid,IonImg,IonInput,IonItem,IonLabel,IonLoading,IonPage,IonRow,IonTitle,IonToolbar}from\"@ionic/react\";import React,{useState}from\"react\";import{useHistory}from\"react-router\";import TGWLogo from\"../../components/TGWLogo.png\";import Connection from\"../../mixins/Connection\";import{validCellNum,validPassword}from\"../../components/Regex/Regex\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignIn=function SignIn(){var path=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showLoader=_useState2[0],setShowLoader=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showError=_useState4[0],setShowError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showSuccess=_useState6[0],setShowSuccess=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),successMessage=_useState8[0],setSuccessMessage=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isFormValid=_useState12[0],setIsFormValid=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),cellNum=_useState14[0],setCellNum=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),password=_useState16[0],setPassword=_useState16[1];var updateCellNum=function updateCellNum(cellNum){setCellNum(cellNum);};var updatePassword=function updatePassword(password){setPassword(password);};var buttonHandler=function buttonHandler(){validateForm();if(isFormValid===true){var url=\"login\".concat(\"/\",cellNum,\"/\",password);Connection.processGetRequest({},url,function(response){mapResponse(response);});}};var validateForm=function validateForm(){if(cellNum===\"\"||password===\"\"){setShowLoader(false);setIsFormValid(false);setErrorMessage(\"Fields cannot be empty.\");setShowError(true);}else{if(!validCellNum.test(cellNum)){setShowLoader(false);setIsFormValid(false);setErrorMessage(\"Invalid Cell Number.\");setShowError(true);}else if(!validPassword.test(password)){setShowLoader(false);setIsFormValid(false);setErrorMessage(\"Password must be 8-16 characters long. Ensure it includes atleast 1 aphabet character and 1 digit.\");setShowError(true);}else{setIsFormValid(true);}}};var mapResponse=function mapResponse(response){setShowLoader(false);if(response.type===\"error\"){setShowLoader(false);setErrorMessage(response.data);setShowError(true);setCellNum(\"\");setPassword(\"\");}else{setSuccessMessage(\"Successfully Sign In!\");setShowSuccess(true);}};return/*#__PURE__*/_jsx(IonPage,{children:/*#__PURE__*/_jsxs(IonContent,{children:[/*#__PURE__*/_jsx(IonImg,{src:TGWLogo,alt:\"Logo.png\"}),/*#__PURE__*/_jsxs(IonToolbar,{children:[/*#__PURE__*/_jsx(IonLoading,{cssClass:\"my-custom-class\",showBackdrop:true,isOpen:showLoader,message:\"Please wait...\"}),/*#__PURE__*/_jsx(IonAlert,{isOpen:showError,onDidDismiss:function onDidDismiss(){return setShowError(false);},header:\"Error\",subHeader:\"Something went wrong.\",message:errorMessage,buttons:[\"OK\"]}),/*#__PURE__*/_jsx(IonAlert,{isOpen:showSuccess,onDidDismiss:function onDidDismiss(){return path.push(\"/dashboard\");},header:\"Success\",subHeader:successMessage,buttons:[\"OK\"]}),/*#__PURE__*/_jsxs(IonGrid,{children:[/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonTitle,{children:\"Sign In\"})})})}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"floating\",children:\"Cell Number\"}),/*#__PURE__*/_jsx(IonInput,{value:cellNum,onIonChange:function onIonChange(e){return updateCellNum(e.detail.value);}})]})})}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"floating\",children:\"Password\"}),/*#__PURE__*/_jsx(IonInput,{type:\"password\",value:password,onIonChange:function onIonChange(e){return updatePassword(e.detail.value);}})]})})}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsx(IonButton,{shape:\"round\",type:\"submit\",expand:\"block\",onClick:buttonHandler,children:\"SignIn\"})})}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/forgot\",children:\"Forgot password ?\"})})})}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account ? \",/*#__PURE__*/_jsx(\"a\",{href:\"/signUp\",children:\"Sign Up.\"})]})})})]})]})]})});};export default SignIn;","map":{"version":3,"sources":["/Users/onceknownriley/Dev/Ionic-React/admin/src/pages/SignIn/SignIn.tsx"],"names":["IonAlert","IonButton","IonCol","IonContent","IonGrid","IonImg","IonInput","IonItem","IonLabel","IonLoading","IonPage","IonRow","IonTitle","IonToolbar","React","useState","useHistory","TGWLogo","Connection","validCellNum","validPassword","SignIn","path","showLoader","setShowLoader","showError","setShowError","showSuccess","setShowSuccess","successMessage","setSuccessMessage","errorMessage","setErrorMessage","isFormValid","setIsFormValid","cellNum","setCellNum","password","setPassword","updateCellNum","updatePassword","buttonHandler","validateForm","url","concat","processGetRequest","response","mapResponse","test","type","data","push","e","detail","value"],"mappings":"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","sourcesContent":["import {\n  IonAlert,\n  IonBackButton,\n  IonButton,\n  IonButtons,\n  IonCol,\n  IonContent,\n  IonFooter,\n  IonGrid,\n  IonHeader,\n  IonImg,\n  IonInput,\n  IonItem,\n  IonLabel,\n  IonLoading,\n  IonPage,\n  IonRow,\n  IonTitle,\n  IonToast,\n  IonToolbar,\n} from \"@ionic/react\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport TGWLogo from \"../../components/TGWLogo.png\";\nimport Connection from \"../../mixins/Connection\";\nimport {\n  validCellNum,\n  validPassword,\n} from \"../../components/Regex/Regex\";\n\nconst SignIn: React.FC = () => {\n  const path = useHistory();\n\n  const [showLoader, setShowLoader] = useState(false);\n  const [showError, setShowError] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [isFormValid, setIsFormValid] = useState(false);\n\n  const [cellNum, setCellNum] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const updateCellNum = (cellNum: any) => {\n    setCellNum(cellNum);\n  };\n  const updatePassword = (password: any) => {\n    setPassword(password);\n  };\n\n  const buttonHandler = () => {\n    validateForm();\n    if (isFormValid === true) {\n      let url = \"login\".concat(\"/\", cellNum, \"/\", password);\n      Connection.processGetRequest({}, url, (response: any) => {\n        mapResponse(response);\n      });\n    }\n  };\n\n  const validateForm = () => {\n    if (cellNum === \"\" || password === \"\") {\n      setShowLoader(false);\n      setIsFormValid(false);\n      setErrorMessage(\"Fields cannot be empty.\");\n      setShowError(true);\n    } else {\n      if (!validCellNum.test(cellNum)) {\n        setShowLoader(false);\n        setIsFormValid(false);\n        setErrorMessage(\"Invalid Cell Number.\");\n        setShowError(true);\n      } else if (!validPassword.test(password)) {\n        setShowLoader(false);\n        setIsFormValid(false);\n        setErrorMessage(\n          \"Password must be 8-16 characters long. Ensure it includes atleast 1 aphabet character and 1 digit.\"\n        );\n        setShowError(true);\n      } else {\n        setIsFormValid(true);\n      }\n    }\n  };\n\n  const mapResponse = (response: any) => {\n    setShowLoader(false);\n    if (response.type === \"error\") {\n      setShowLoader(false);\n      setErrorMessage(response.data);\n      setShowError(true);\n      setCellNum(\"\");\n      setPassword(\"\");\n    } else {\n      setSuccessMessage(\"Successfully Sign In!\");\n      setShowSuccess(true);\n    }\n  };\n\n  return (\n    <IonPage>\n      <IonContent>\n        <IonImg src={TGWLogo} alt={\"Logo.png\"} />\n        <IonToolbar>\n          <IonLoading\n            cssClass=\"my-custom-class\"\n            showBackdrop\n            isOpen={showLoader}\n            message={\"Please wait...\"}\n          />\n\n          <IonAlert\n            isOpen={showError}\n            onDidDismiss={() => setShowError(false)}\n            header={\"Error\"}\n            subHeader={\"Something went wrong.\"}\n            message={errorMessage}\n            buttons={[\"OK\"]}\n          />\n\n          <IonAlert\n            isOpen={showSuccess}\n            onDidDismiss={() => path.push(\"/dashboard\")}\n            header={\"Success\"}\n            subHeader={successMessage}\n            buttons={[\"OK\"]}\n          />\n          <IonGrid>\n            <IonRow>\n              <IonCol>\n                <IonToolbar>\n                  <IonTitle>Sign In</IonTitle>\n                </IonToolbar>\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol>\n                <IonItem>\n                  <IonLabel position=\"floating\">Cell Number</IonLabel>\n                  <IonInput\n                    value={cellNum}\n                    onIonChange={(e) => updateCellNum(e.detail.value)}\n                  ></IonInput>\n                </IonItem>\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol>\n                <IonItem>\n                  <IonLabel position=\"floating\">Password</IonLabel>\n                  <IonInput\n                    type=\"password\"\n                    value={password}\n                    onIonChange={(e) => updatePassword(e.detail.value)}\n                  ></IonInput>\n                </IonItem>\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol>\n                <IonButton\n                  shape=\"round\"\n                  type=\"submit\"\n                  expand=\"block\"\n                  onClick={buttonHandler}\n                >\n                  SignIn\n                </IonButton>\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol>\n                <p>\n                  <a href=\"/forgot\">Forgot password ?</a>\n                </p>\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol>\n                <p>\n                  Don't have an account ? <a href=\"/signUp\">Sign Up.</a>\n                </p>\n              </IonCol>\n            </IonRow>\n          </IonGrid>\n        </IonToolbar>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default SignIn;\n"]},"metadata":{},"sourceType":"module"}