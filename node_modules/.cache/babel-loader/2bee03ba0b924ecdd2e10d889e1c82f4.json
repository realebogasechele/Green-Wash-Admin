{"ast":null,"code":"import _slicedToArray from\"/Users/onceknownriley/Documents/GreenWashProject/Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonAlert,IonButton,IonCol,IonGrid,IonInput,IonItem,IonLabel,IonLoading,IonRow,IonTextarea,IonToggle,useIonViewDidEnter}from\"@ionic/react\";import React,{useState}from\"react\";import{useHistory}from\"react-router\";import Connection from\"../../mixins/Connection\";import{validName}from\"../Regex/Regex\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PackageForm=function PackageForm(props){useIonViewDidEnter(function(){if(props.name==='Update'){setShowLoader(true);getPackage();}});var path=useHistory();var valid=false;var _useState=useState({packageId:\"\",promotionId:\"\",packageName:\"\",minutes:0,standardPrice:\"\",suvPrice:\"\",description:\"\",onPromotion:true}),_useState2=_slicedToArray(_useState,2),pack=_useState2[0],setPack=_useState2[1];var getPackage=function getPackage(){var url=\"package/get/\".concat(props.id);Connection.processGetRequest({},url,function(response){mapPackage(response);});};var mapPackage=function mapPackage(response){if(response.type===\"error\"){setShowLoader(false);setErrorMessage(response.data);setShowError(true);}else{setShowLoader(false);setPack(response.data.data);}};var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showLoader=_useState4[0],setShowLoader=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showError=_useState6[0],setShowError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),successMessage=_useState10[0],setSuccessMessage=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showSuccess=_useState12[0],setShowSuccess=_useState12[1];var updatePackageName=function updatePackageName(packageName){pack.packageName=packageName;};var updateMinutes=function updateMinutes(minutes){pack.minutes=minutes;};var updateStandardPrice=function updateStandardPrice(standardPrice){pack.standardPrice=standardPrice;};var updateSuvPrice=function updateSuvPrice(suvPrice){pack.suvPrice=suvPrice;};var updateDescription=function updateDescription(description){pack.description=description;};var updateOnPromotion=function updateOnPromotion(onPromotion){pack.onPromotion=onPromotion;};function mapDeleteResponse(response){return console.log(\"deleted\");}var buttonHandler=function buttonHandler(){validateForm();if(valid===true){if(props.name===\"Update\"){var url=\"package/update\";var payload={packageId:pack.packageId,promotionId:pack.promotionId,packageName:pack.packageName,minutes:pack.minutes,standardPrice:pack.standardPrice,description:pack.description,suvPrice:pack.suvPrice,onPromotion:pack.onPromotion};Connection.processPostRequest(payload,url,function(response){mapResponse(response);});}else if(props.name===\"Delete\"){url=\"package/remove/\".concat(pack.packageId);Connection.processDeleteRequest({},url,function(response){mapDeleteResponse(response);});}else{url=\"package/add\";var payload={packageId:pack.packageId,promotionId:pack.promotionId,packageName:pack.packageName,minutes:pack.minutes,standardPrice:pack.standardPrice,description:pack.description,suvPrice:pack.suvPrice,onPromotion:pack.onPromotion};Connection.processPostRequest(payload,url,function(response){mapResponse(response);});}}};var mapResponse=function mapResponse(response){if(response.data==='error'){setShowLoader(false);setErrorMessage(response.data.data);setShowError(true);}else{setShowLoader(false);if(props.name==='Update'){setSuccessMessage('Successfully Updated!');setShowSuccess(true);}else{setSuccessMessage('Successfully Added!');setShowSuccess(true);}}};var validateForm=function validateForm(){if(pack.packageName===''||pack.standardPrice===''||pack.suvPrice===''||pack.description===''){setShowLoader(false);setErrorMessage('Fields must not be empty.');setShowError(true);}else if(!validName.test(pack.packageName)){setShowLoader(false);setErrorMessage('Invalid Package Name.');setShowError(true);}else if(pack.minutes<=0){setShowLoader(false);setErrorMessage('You cannot have 0 minutes.');setShowError(true);}else if(pack.standardPrice<='0'){setShowLoader(false);setErrorMessage('You cannot have a free item');setShowError(true);}else{valid=true;}};return/*#__PURE__*/_jsxs(IonGrid,{children:[/*#__PURE__*/_jsx(IonLoading,{cssClass:\"my-custom-class\",showBackdrop:true,isOpen:showLoader,message:\"Please wait...\"}),/*#__PURE__*/_jsx(IonAlert,{isOpen:showError,onDidDismiss:function onDidDismiss(){return setShowError(false);},header:\"Error\",subHeader:\"Something went wrong.\",message:errorMessage,buttons:[\"OK\"]}),/*#__PURE__*/_jsx(IonAlert,{isOpen:showSuccess,onDidDismiss:function onDidDismiss(){return path.push(\"/page/Package/package\");},header:\"Success\",subHeader:successMessage,buttons:[\"OK\"]}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"floating\",children:\"Package Name\"}),/*#__PURE__*/_jsx(IonInput,{disabled:props.isDisabled,value:pack.packageName,onIonChange:function onIonChange(e){return updatePackageName(e.detail.value);}})]})})}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"floating\",children:\"Minutes\"}),/*#__PURE__*/_jsx(IonInput,{disabled:props.isDisabled,value:pack.minutes,onIonChange:function onIonChange(e){return updateMinutes(e.detail.value);}})]})})}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"floating\",children:\"Standard Price\"}),/*#__PURE__*/_jsx(IonInput,{disabled:props.isDisabled,value:pack.standardPrice,onIonChange:function onIonChange(e){return updateStandardPrice(e.detail.value);}})]})})}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"floating\",children:\"SUV Price\"}),/*#__PURE__*/_jsx(IonInput,{disabled:props.isDisabled,value:pack.suvPrice,onIonChange:function onIonChange(e){return updateSuvPrice(e.detail.value);}})]})})}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"floating\",children:\"Description\"}),/*#__PURE__*/_jsx(IonTextarea,{spellcheck:true,disabled:props.isDisabled,value:pack.description,onIonChange:function onIonChange(e){return updateDescription(e.detail.value);}})]})})}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{children:\"On Promotion\"}),/*#__PURE__*/_jsx(IonToggle,{color:\"primary\",disabled:props.isDisabled,checked:pack.onPromotion,onIonChange:function onIonChange(e){return updateOnPromotion(e.detail.checked);}})]})})}),/*#__PURE__*/_jsx(IonRow,{children:/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsx(IonButton,{shape:\"round\",type:\"submit\",expand:\"block\",onClick:buttonHandler,children:props.name})})})]});};export default PackageForm;","map":{"version":3,"sources":["/Users/onceknownriley/Documents/GreenWashProject/Admin/src/components/Forms/PackageForm.tsx"],"names":["IonAlert","IonButton","IonCol","IonGrid","IonInput","IonItem","IonLabel","IonLoading","IonRow","IonTextarea","IonToggle","useIonViewDidEnter","React","useState","useHistory","Connection","validName","PackageForm","props","name","setShowLoader","getPackage","path","valid","packageId","promotionId","packageName","minutes","standardPrice","suvPrice","description","onPromotion","pack","setPack","url","concat","id","processGetRequest","response","mapPackage","type","setErrorMessage","data","setShowError","showLoader","showError","errorMessage","successMessage","setSuccessMessage","showSuccess","setShowSuccess","updatePackageName","updateMinutes","updateStandardPrice","updateSuvPrice","updateDescription","updateOnPromotion","mapDeleteResponse","console","log","buttonHandler","validateForm","payload","processPostRequest","mapResponse","processDeleteRequest","test","push","isDisabled","e","detail","value","checked"],"mappings":"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","sourcesContent":["import {\n  IonAlert,\n  IonButton,\n  IonCol,\n  IonGrid,\n  IonInput,\n  IonItem,\n  IonLabel,\n  IonLoading,\n  IonRow,\n  IonTextarea,\n  IonToggle,\n  useIonViewDidEnter,\n} from \"@ionic/react\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport Connection from \"../../mixins/Connection\";\nimport { validName } from \"../Regex/Regex\";\n\nconst PackageForm: React.FC<{\n  name: string;\n  isDisabled: boolean;\n  id: string;\n}> = (props) => {\n\n  useIonViewDidEnter(()=>{\n    if(props.name === 'Update'){\n      setShowLoader(true);\n      getPackage();\n    }\n  });\n\n  const path = useHistory();\n  let valid: boolean = false;\n\n  const [pack, setPack] = useState(\n    {\n      packageId: \"\",\n      promotionId: \"\",\n      packageName: \"\",\n      minutes: 0,\n      standardPrice: \"\",\n      suvPrice: \"\",\n      description: \"\",\n      onPromotion: true,\n    });\n\n    const getPackage = () => {\n      var url = \"package/get/\".concat(props.id);\n  \n      Connection.processGetRequest({}, url, (response: any) => {\n        mapPackage(response);\n      });\n    };\n\n    const mapPackage = (response: any) => {\n      if (response.type === \"error\") {\n        setShowLoader(false);\n        setErrorMessage(response.data);\n        setShowError(true);\n      } else {\n        setShowLoader(false);\n        setPack(response.data.data);\n      }\n    };\n\n    const [showLoader, setShowLoader] = useState(false);\n    const [showError, setShowError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState(\"\");\n    const [successMessage, setSuccessMessage] = useState(\"\");\n    const [showSuccess, setShowSuccess] = useState(false);\n\n  const updatePackageName = (packageName: any) => {\n    pack.packageName = packageName;\n  };\n  const updateMinutes = (minutes: any) => {\n    pack.minutes = minutes;\n  };\n  const updateStandardPrice = (standardPrice: any) => {\n    pack.standardPrice = standardPrice\n  };\n  const updateSuvPrice = (suvPrice: any) => {\n   pack.suvPrice = suvPrice;\n  };\n  const updateDescription = (description: any) => {\n    pack.description = description;\n  };\n  const updateOnPromotion = (onPromotion: any) => {\n    pack.onPromotion = onPromotion;\n  };\n\n  function mapDeleteResponse(response: any) {\n    return (console.log(\"deleted\"));\n  }\n\n  const buttonHandler = () => {\n    validateForm();\n    if(valid === true){\n    if (props.name === \"Update\") {\n      var url = \"package/update\";\n      var payload = {\n        packageId: pack.packageId,\n        promotionId: pack.promotionId,\n        packageName: pack.packageName,\n        minutes: pack.minutes,\n        standardPrice: pack.standardPrice,\n        description:pack.description,\n        suvPrice: pack.suvPrice,\n        onPromotion: pack.onPromotion,\n      };\n\n      Connection.processPostRequest(payload, url, (response: any) => {\n        mapResponse(response);\n      });\n    } else if (props.name === \"Delete\") {\n      url = \"package/remove/\".concat(pack.packageId);\n\n      Connection.processDeleteRequest({}, url,(response: any)=>{\n        mapDeleteResponse(response);\n      })\n\n    } else {\n      url = \"package/add\";\n      var payload = {\n        packageId: pack.packageId,\n        promotionId: pack.promotionId,\n        packageName: pack.packageName,\n        minutes: pack.minutes,\n        standardPrice: pack.standardPrice,\n        description:pack.description,\n        suvPrice: pack.suvPrice,\n        onPromotion: pack.onPromotion,\n      };\n      Connection.processPostRequest(payload, url, (response: any) => {\n        mapResponse(response);\n      });\n    }\n  }\n  };\n\n  const mapResponse = (response: any) => {\n    if(response.data === 'error'){\n      setShowLoader(false);\n      setErrorMessage(response.data.data);\n      setShowError(true);\n    }else{\n      setShowLoader(false);\n      if(props.name === 'Update'){\n        setSuccessMessage('Successfully Updated!');\n        setShowSuccess(true);\n      }else{\n        setSuccessMessage('Successfully Added!');\n        setShowSuccess(true);\n      }\n    }\n  };\n\n  const validateForm = () => {\n    if(pack.packageName === '' || pack.standardPrice === '' || pack.suvPrice === '' || pack.description === ''){\n      setShowLoader(false);\n      setErrorMessage('Fields must not be empty.')\n      setShowError(true);\n    }else if(!validName.test(pack.packageName)){\n      setShowLoader(false);\n      setErrorMessage('Invalid Package Name.')\n      setShowError(true);\n    }else if(pack.minutes <= 0){\n      setShowLoader(false);\n      setErrorMessage('You cannot have 0 minutes.')\n      setShowError(true);\n    }else if(pack.standardPrice <='0'){\n      setShowLoader(false);\n      setErrorMessage('You cannot have a free item')\n      setShowError(true);\n    }else{\n      valid = true;\n    }\n  }\n  return (\n    <IonGrid>\n      <IonLoading\n        cssClass=\"my-custom-class\"\n        showBackdrop\n        isOpen={showLoader}\n        message={\"Please wait...\"}\n      />\n\n      <IonAlert\n        isOpen={showError}\n        onDidDismiss={() => setShowError(false)}\n        header={\"Error\"}\n        subHeader={\"Something went wrong.\"}\n        message={errorMessage}\n        buttons={[\"OK\"]}\n      />\n\n      <IonAlert\n        isOpen={showSuccess}\n        onDidDismiss={() => path.push(\"/page/Package/package\")}\n        header={\"Success\"}\n        subHeader={successMessage}\n        buttons={[\"OK\"]}\n      />\n      <IonRow>\n        <IonCol>\n          <IonItem>\n            <IonLabel position=\"floating\">Package Name</IonLabel>\n            <IonInput\n              disabled={props.isDisabled}\n              value={pack.packageName}\n              onIonChange={(e) => updatePackageName(e.detail.value)}\n            ></IonInput>\n          </IonItem>\n        </IonCol>\n      </IonRow>\n      <IonRow>\n        <IonCol>\n          <IonItem>\n            <IonLabel position=\"floating\">Minutes</IonLabel>\n            <IonInput\n              disabled={props.isDisabled}\n              value={pack.minutes}\n              onIonChange={(e) => updateMinutes(e.detail.value)}\n            ></IonInput>\n          </IonItem>\n        </IonCol>\n      </IonRow>\n      <IonRow>\n        <IonCol>\n          <IonItem>\n            <IonLabel position=\"floating\">Standard Price</IonLabel>\n            <IonInput\n              disabled={props.isDisabled}\n              value={pack.standardPrice}\n              onIonChange={(e) => updateStandardPrice(e.detail.value)}\n            ></IonInput>\n          </IonItem>\n        </IonCol>\n      </IonRow>\n      <IonRow>\n        <IonCol>\n          <IonItem>\n            <IonLabel position=\"floating\">SUV Price</IonLabel>\n            <IonInput\n              disabled={props.isDisabled}\n              value={pack.suvPrice}\n              onIonChange={(e) => updateSuvPrice(e.detail.value)}\n            ></IonInput>\n          </IonItem>\n        </IonCol>\n      </IonRow>\n      <IonRow>\n        <IonCol>\n          <IonItem>\n            <IonLabel position=\"floating\">Description</IonLabel>\n            <IonTextarea\n            spellcheck={true}\n              disabled={props.isDisabled}\n              value={pack.description}\n              onIonChange={(e) => updateDescription(e.detail.value)}\n            />\n          </IonItem>\n        </IonCol>\n      </IonRow>\n      <IonRow>\n        <IonCol>\n          <IonItem>\n            <IonLabel>On Promotion</IonLabel>\n            <IonToggle\n              color={\"primary\"}\n              disabled={props.isDisabled}\n              checked={pack.onPromotion}\n              onIonChange={(e) => updateOnPromotion(e.detail.checked)}\n            />\n          </IonItem>\n        </IonCol>\n      </IonRow>\n      <IonRow>\n        <IonCol>\n          <IonButton shape=\"round\" type=\"submit\" expand=\"block\" onClick={buttonHandler}>\n            {props.name}\n          </IonButton>\n        </IonCol>\n      </IonRow>\n    </IonGrid>\n  );\n};\n\nexport default PackageForm;"]},"metadata":{},"sourceType":"module"}